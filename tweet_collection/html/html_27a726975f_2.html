<!doctype html><html lang="en"><head><title data-rh="true">Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses | by Chia Jeng Yang | WhyHow.AI | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2024-11-27T17:28:16.831Z"/><meta data-rh="true" name="title" content="Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses | by Chia Jeng Yang | WhyHow.AI | Medium"/><meta data-rh="true" property="og:title" content="Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses"/><meta data-rh="true" property="al:android:url" content="medium://p/c90e073e0052"/><meta data-rh="true" property="al:ios:url" content="medium://p/c90e073e0052"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="Update: We have recently open-sourced our KG Studio here: https://medium.com/enterprise-rag/open-sourcing-the-whyhow-knowledge-graph-studio-powered-by-nosql-edce283fb341 In this article and open…"/><meta data-rh="true" property="og:description" content="Multi-graph multi-agent systems for legal documents that recursively retrieves different clauses, footnotes and definitions"/><meta data-rh="true" property="og:url" content="https://medium.com/enterprise-rag/legal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052"/><meta data-rh="true" property="al:web:url" content="https://medium.com/enterprise-rag/legal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1200/1*I-ULV2KUEgZNI5ZuT9ApOg.png"/><meta data-rh="true" property="article:author" content="https://chiajy.medium.com"/><meta data-rh="true" name="author" content="Chia Jeng Yang"/><meta data-rh="true" name="robots" content="index,noarchive,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses"/><meta data-rh="true" name="twitter:site" content="@Medium"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/c90e073e0052"/><meta data-rh="true" property="twitter:description" content="Multi-graph multi-agent systems for legal documents that recursively retrieves different clauses, footnotes and definitions"/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1200/1*I-ULV2KUEgZNI5ZuT9ApOg.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:creator" content="@chiajy2000"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="16 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/5d8de952517e8160e40ef9841c781cdc14a5db313057fa3c3de41c6f5b494b19"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:304:304/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:240:240/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:152:152/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:120:120/10fd5c419ac61637245384e7099e131627900034828f4f386bdaa47a74eae156"/><link data-rh="true" rel="mask-icon" href="https://miro.medium.com/v2/resize:fill:1000:1000/7*GAOKVe--MXbEJmV9230oOQ.png" color="#171717"/><link data-rh="true" rel="preconnect" href="https://glyph.medium.com" crossOrigin=""/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://chiajy.medium.com"/><link data-rh="true" rel="canonical" href="https://medium.com/enterprise-rag/legal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/c90e073e0052"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:1200\u002F1*I-ULV2KUEgZNI5ZuT9ApOg.png"],"url":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052","dateCreated":"2024-09-07T17:37:07.801Z","datePublished":"2024-09-07T17:37:07.801Z","dateModified":"2024-11-27T17:28:16.831Z","headline":"Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses","name":"Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses","description":"Update: We have recently open-sourced our KG Studio here: https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fopen-sourcing-the-whyhow-knowledge-graph-studio-powered-by-nosql-edce283fb341 In this article and open…","identifier":"c90e073e0052","author":{"@type":"Person","name":"Chia Jeng Yang","url":"https:\u002F\u002Fchiajy.medium.com"},"creator":["Chia Jeng Yang"],"publisher":{"@type":"Organization","name":"WhyHow.AI","url":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag","logo":{"@type":"ImageObject","width":272,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:544\u002F7*V1_7XP4snlmqrc_0Njontw.png"}},"mainEntityOfPage":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052"}</script><style type="text/css" data-fela-rehydration="582" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs {background: #fff;color: black;
}/* Gray DOCTYPE selectors like WebKit */
.xml .hljs-meta {color: #c0c0c0;
}.hljs-comment,
.hljs-quote {color: #007400;
}.hljs-tag,
.hljs-attribute,
.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-name {color: #aa0d91;
}.hljs-variable,
.hljs-template-variable {color: #3F6E74;
}.hljs-code,
.hljs-string,
.hljs-meta .hljs-string {color: #c41a16;
}.hljs-regexp,
.hljs-link {color: #0E0EFF;
}.hljs-title,
.hljs-symbol,
.hljs-bullet,
.hljs-number {color: #1c00cf;
}.hljs-section,
.hljs-meta {color: #643820;
}.hljs-title.class_,
.hljs-class .hljs-title,
.hljs-type,
.hljs-built_in,
.hljs-params {color: #5c2699;
}.hljs-attr {color: #836C28;
}.hljs-subst {color: #000;
}.hljs-formula {background-color: #eee;font-style: italic;
}.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd;
}.hljs-selector-id,
.hljs-selector-class {color: #9b703f;
}.hljs-doctag,
.hljs-strong {font-weight: bold;
}.hljs-emphasis {font-style: italic;
}
</style><style type="text/css" data-fela-rehydration="582" data-fela-type="KEYFRAME">@-webkit-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE">.a{font-family:medium-content-sans-serif-font, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255, 1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0 24px}.q{align-items:center}.r{border-bottom:solid 1px #F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1 0 auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{width:auto}.av path{fill:#242424}.aw{height:25px}.ax{margin-left:16px}.ay{border:none}.az{border-radius:20px}.ba{width:240px}.bb{background:#F9F9F9}.bc path{fill:#6B6B6B}.be{outline:none}.bf{font-family:sohne, "Helvetica Neue", Helvetica, Arial, sans-serif}.bg{font-size:14px}.bh{width:100%}.bi{padding:10px 20px 10px 0}.bj{background-color:transparent}.bk{color:#242424}.bl::placeholder{color:#6B6B6B}.bm{display:inline-block}.bn{margin-left:12px}.bo{margin-right:12px}.bp{border-radius:4px}.bq{margin-left:24px}.br{height:24px}.bx{background-color:#F9F9F9}.by{border-radius:50%}.bz{height:32px}.ca{width:32px}.cb{justify-content:center}.ch{max-width:680px}.ci{min-width:0}.cj{animation:k1 1.2s ease-in-out infinite}.ck{height:100vh}.cl{margin-bottom:16px}.cm{margin-top:48px}.cn{align-items:flex-start}.co{flex-direction:column}.cp{justify-content:space-between}.cq{margin-bottom:24px}.cw{width:80%}.cx{background-color:#F2F2F2}.dd{height:44px}.de{width:44px}.df{margin:auto 0}.dg{margin-bottom:4px}.dh{height:16px}.di{width:120px}.dj{width:80px}.dp{margin-bottom:8px}.dq{width:96%}.dr{width:98%}.ds{width:81%}.dt{margin-left:8px}.du{color:#6B6B6B}.dv{font-size:13px}.dw{height:100%}.ep{color:#FFFFFF}.eq{fill:#FFFFFF}.er{background:rgba(26, 137, 23, 1)}.es{border-color:rgba(26, 137, 23, 1)}.ew:disabled{cursor:inherit !important}.ex:disabled{opacity:0.3}.ey:disabled:hover{background:rgba(26, 137, 23, 1)}.ez:disabled:hover{border-color:rgba(26, 137, 23, 1)}.fa{border-radius:99em}.fb{border-width:1px}.fc{border-style:solid}.fd{box-sizing:border-box}.fe{text-decoration:none}.ff{text-align:center}.fi{margin-right:32px}.fj{position:relative}.fk{fill:#6B6B6B}.fn{background:transparent}.fo svg{margin-left:4px}.fp svg{fill:#6B6B6B}.fr{box-shadow:inset 0 0 0 1px rgba(0, 0, 0, 0.05)}.fs{position:absolute}.fz{margin:0 24px}.gd{background:rgba(255, 255, 255, 1)}.ge{border:1px solid #F2F2F2}.gf{box-shadow:0 1px 4px #F2F2F2}.gg{max-height:100vh}.gh{overflow-y:auto}.gi{left:0}.gj{top:calc(100vh + 100px)}.gk{bottom:calc(100vh + 100px)}.gl{width:10px}.gm{pointer-events:none}.gn{word-break:break-word}.go{word-wrap:break-word}.gp:after{display:block}.gq:after{content:""}.gr:after{clear:both}.gs{line-height:1.23}.gt{letter-spacing:0}.gu{font-style:normal}.gv{font-weight:700}.ia{align-items:baseline}.ib{width:48px}.ic{height:48px}.id{border:2px solid rgba(255, 255, 255, 1)}.ie{z-index:0}.if{box-shadow:none}.ig{border:1px solid rgba(0, 0, 0, 0.05)}.ih{margin-left:-12px}.ii{width:28px}.ij{height:28px}.ik{z-index:1}.il{width:24px}.im{margin-bottom:2px}.in{flex-wrap:nowrap}.io{font-size:16px}.ip{line-height:24px}.ir{margin:0 8px}.is{display:inline}.it{color:rgba(26, 137, 23, 1)}.iu{fill:rgba(26, 137, 23, 1)}.ix{flex:0 0 auto}.ja{flex-wrap:wrap}.jd{white-space:pre-wrap}.je{margin-right:4px}.jf{overflow:hidden}.jg{max-height:20px}.jh{text-overflow:ellipsis}.ji{display:-webkit-box}.jj{-webkit-line-clamp:1}.jk{-webkit-box-orient:vertical}.jl{word-break:break-all}.jn{padding-left:8px}.jo{padding-right:8px}.kp> *{flex-shrink:0}.kq{overflow-x:scroll}.kr::-webkit-scrollbar{display:none}.ks{scrollbar-width:none}.kt{-ms-overflow-style:none}.ku{width:74px}.kv{flex-direction:row}.kw{z-index:2}.kz{-webkit-user-select:none}.la{border:0}.lb{fill:rgba(117, 117, 117, 1)}.le{outline:0}.lf{user-select:none}.lg> svg{pointer-events:none}.lp{cursor:progress}.lq{margin-left:4px}.lr{margin-top:0px}.ls{opacity:1}.lt{padding:4px 0}.lw{width:16px}.ly{display:inline-flex}.me{max-width:100%}.mf{padding:8px 2px}.mg svg{color:#6B6B6B}.mx{line-height:1.58}.my{letter-spacing:-0.004em}.mz{font-family:source-serif-pro, Georgia, Cambria, "Times New Roman", Times, serif}.nu{margin-bottom:-0.46em}.nv{text-decoration:underline}.nw{clear:both}.oc{margin-left:auto}.od{margin-right:auto}.oe{max-width:1600px}.ok{padding-top:5px}.ol{padding-bottom:5px}.on{cursor:zoom-in}.oo{z-index:auto}.oq{height:auto}.or{list-style-type:disc}.os{margin-left:30px}.ot{padding-left:0px}.oz{overflow-x:auto}.pa{font-family:source-code-pro, Menlo, Monaco, "Courier New", Courier, monospace}.pb{padding:32px}.pc{border:1px solid #E5E5E5}.pd{line-height:1.4}.pe{letter-spacing:-0.022em}.pf{margin-top:-0.2em}.pg{margin-bottom:-0.2em}.ph{white-space:pre}.pi{min-width:fit-content}.pj{line-height:1.12}.pk{font-weight:600}.qf{margin-bottom:-0.28em}.qg{max-width:1900px}.qh{margin-top:10px}.qi{max-width:728px}.ql{line-height:1.18}.qz{margin-bottom:-0.31em}.rf{max-width:2052px}.rg{margin-top:32px}.rh{margin-bottom:14px}.ri{padding-top:24px}.rj{padding-bottom:10px}.rk{background-color:#000000}.rl{height:3px}.rm{width:3px}.rn{margin-right:20px}.ro{margin-bottom:26px}.rp{margin-top:6px}.rq{margin-top:8px}.rr{margin-right:8px}.rs{padding:8px 16px}.rt{border-radius:100px}.ru{transition:background 300ms ease}.rw{white-space:nowrap}.rx{border-top:none}.ry{height:52px}.rz{max-height:52px}.sa{box-sizing:content-box}.sb{position:static}.sd{max-width:155px}.so{height:0px}.sp{margin-bottom:40px}.sq{margin-bottom:48px}.te{border-radius:2px}.tg{height:64px}.th{width:64px}.ti{align-self:flex-end}.tj{flex:1 1 auto}.tn{padding-right:4px}.to{font-weight:500}.tv{margin-top:16px}.tw{color:rgba(255, 255, 255, 1)}.tx{fill:rgba(255, 255, 255, 1)}.ty{background:rgba(25, 25, 25, 1)}.tz{border-color:rgba(25, 25, 25, 1)}.uc:disabled{opacity:0.1}.ud:disabled:hover{background:rgba(25, 25, 25, 1)}.ue:disabled:hover{border-color:rgba(25, 25, 25, 1)}.un{gap:18px}.uo{fill:rgba(61, 61, 61, 1)}.uq{fill:#242424}.ur{background:0}.us{border-color:#242424}.ut:disabled:hover{color:#242424}.uu:disabled:hover{fill:#242424}.uv:disabled:hover{border-color:#242424}.vg{border-bottom:solid 1px #E5E5E5}.vh{margin-top:72px}.vi{padding:24px 0}.vj{margin-bottom:0px}.vk{margin-right:16px}.as:hover:not(:disabled){color:rgba(25, 25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25, 1)}.et:hover{background:rgba(15, 115, 12, 1)}.eu:hover{border-color:rgba(15, 115, 12, 1)}.ev:hover{cursor:pointer}.fl:hover{color:#242424}.fm:hover{fill:#242424}.fq:hover svg{fill:#242424}.ft:hover{background-color:rgba(0, 0, 0, 0.1)}.iq:hover{text-decoration:underline}.iv:hover:not(:disabled){color:rgba(15, 115, 12, 1)}.iw:hover:not(:disabled){fill:rgba(15, 115, 12, 1)}.ld:hover{fill:rgba(8, 8, 8, 1)}.lu:hover{fill:#000000}.lv:hover p{color:#000000}.lx:hover{color:#000000}.mh:hover svg{color:#000000}.rv:hover{background-color:#F2F2F2}.tf:hover{background-color:none}.ua:hover{background:#000000}.ub:hover{border-color:#242424}.up:hover{fill:rgba(25, 25, 25, 1)}.bd:focus-within path{fill:#242424}.lc:focus{fill:rgba(8, 8, 8, 1)}.mi:focus svg{color:#000000}.op:focus{transform:scale(1.01)}.lh:active{border-style:none}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (min-width: 1080px)">.d{display:none}.bw{width:64px}.cg{margin:0 64px}.cv{height:48px}.dc{margin-bottom:52px}.do{margin-bottom:48px}.ef{font-size:14px}.eg{line-height:20px}.em{font-size:13px}.eo{padding:5px 12px}.fh{display:flex}.fy{margin-bottom:68px}.gc{max-width:680px}.hq{font-size:42px}.hr{margin-top:1.19em}.hs{margin-bottom:32px}.ht{line-height:52px}.hu{letter-spacing:-0.011em}.hz{align-items:center}.kb{border-top:solid 1px #F2F2F2}.kc{border-bottom:solid 1px #F2F2F2}.kd{margin:32px 0 0}.ke{padding:3px 8px}.kn> *{margin-right:24px}.ko> :last-child{margin-right:0}.lo{margin-top:0px}.md{margin:0}.nq{font-size:20px}.nr{margin-top:2.14em}.ns{line-height:32px}.nt{letter-spacing:-0.003em}.ob{max-width:1192px}.oj{margin-top:56px}.oy{margin-top:1.14em}.qb{font-size:24px}.qc{margin-top:1.95em}.qd{line-height:30px}.qe{letter-spacing:-0.016em}.qw{margin-top:1.72em}.qx{line-height:24px}.qy{letter-spacing:0}.re{margin-top:0.94em}.si{display:inline-block}.sn{margin-bottom:104px}.sr{flex-direction:row}.su{margin-bottom:0}.sv{margin-right:20px}.tk{max-width:500px}.uj{margin-bottom:88px}.um{margin-bottom:72px}.va{width:min-width}.vf{padding-top:72px}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (max-width: 1079.98px)">.e{display:none}.ln{margin-top:0px}.qj{margin-left:auto}.qk{text-align:center}.sh{display:inline-block}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (max-width: 903.98px)">.f{display:none}.lm{margin-top:0px}.sg{display:inline-block}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (max-width: 727.98px)">.g{display:none}.lk{margin-top:0px}.ll{margin-right:0px}.sf{display:inline-block}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (max-width: 551.98px)">.h{display:none}.s{display:flex}.t{justify-content:space-between}.bs{width:24px}.cc{margin:0 24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dx{font-size:13px}.dy{line-height:20px}.eh{padding:0px 8px 1px}.fu{margin-bottom:4px}.gw{font-size:32px}.gx{margin-top:1.01em}.gy{margin-bottom:24px}.gz{line-height:38px}.ha{letter-spacing:-0.014em}.hv{align-items:flex-start}.iy{flex-direction:column}.jb{margin-bottom:2px}.jp{margin:24px -24px 0}.jq{padding:0}.kf> *{margin-right:8px}.kg> :last-child{margin-right:24px}.kx{margin-left:0px}.li{margin-top:0px}.lj{margin-right:0px}.lz{margin:0}.mj{border:1px solid #F2F2F2}.mk{border-radius:99em}.ml{padding:0px 16px 0px 12px}.mm{height:38px}.mn{align-items:center}.mp svg{margin-right:8px}.na{font-size:18px}.nb{margin-top:1.56em}.nc{line-height:28px}.nd{letter-spacing:-0.003em}.nx{max-width:100%}.of{margin-top:40px}.ou{margin-top:1.34em}.pl{font-size:20px}.pm{margin-top:1.2em}.pn{line-height:24px}.po{letter-spacing:0}.qm{font-size:16px}.qn{margin-top:1.23em}.ra{margin-top:0.67em}.se{display:inline-block}.sj{margin-bottom:96px}.tc{margin-bottom:20px}.td{margin-right:0}.tp{font-size:24px}.tq{line-height:30px}.tr{letter-spacing:-0.016em}.uf{margin-bottom:64px}.uw{width:100%}.vb{padding-top:48px}.mo:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">.i{display:none}.bv{width:64px}.cf{margin:0 64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ed{font-size:14px}.ee{line-height:20px}.ek{font-size:13px}.el{padding:5px 12px}.fg{display:flex}.fx{margin-bottom:68px}.gb{max-width:680px}.hl{font-size:42px}.hm{margin-top:1.19em}.hn{margin-bottom:32px}.ho{line-height:52px}.hp{letter-spacing:-0.011em}.hy{align-items:center}.jx{border-top:solid 1px #F2F2F2}.jy{border-bottom:solid 1px #F2F2F2}.jz{margin:32px 0 0}.ka{padding:3px 8px}.kl> *{margin-right:24px}.km> :last-child{margin-right:0}.mc{margin:0}.nm{font-size:20px}.nn{margin-top:2.14em}.no{line-height:32px}.np{letter-spacing:-0.003em}.oa{max-width:1192px}.oi{margin-top:56px}.ox{margin-top:1.14em}.px{font-size:24px}.py{margin-top:1.95em}.pz{line-height:30px}.qa{letter-spacing:-0.016em}.qt{margin-top:1.72em}.qu{line-height:24px}.qv{letter-spacing:0}.rd{margin-top:0.94em}.sm{margin-bottom:104px}.ss{flex-direction:row}.sw{margin-bottom:0}.sx{margin-right:20px}.tl{max-width:500px}.ui{margin-bottom:88px}.ul{margin-bottom:72px}.uz{width:min-width}.ve{padding-top:72px}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">.j{display:none}.w{display:flex}.x{justify-content:space-between}.bu{width:64px}.ce{margin:0 48px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.eb{font-size:13px}.ec{line-height:20px}.ej{padding:0px 8px 1px}.fw{margin-bottom:68px}.ga{max-width:680px}.hg{font-size:42px}.hh{margin-top:1.19em}.hi{margin-bottom:32px}.hj{line-height:52px}.hk{letter-spacing:-0.011em}.hx{align-items:center}.jt{border-top:solid 1px #F2F2F2}.ju{border-bottom:solid 1px #F2F2F2}.jv{margin:32px 0 0}.jw{padding:3px 8px}.kj> *{margin-right:24px}.kk> :last-child{margin-right:0}.mb{margin:0}.ni{font-size:20px}.nj{margin-top:2.14em}.nk{line-height:32px}.nl{letter-spacing:-0.003em}.nz{max-width:100%}.oh{margin-top:56px}.ow{margin-top:1.14em}.pt{font-size:24px}.pu{margin-top:1.95em}.pv{line-height:30px}.pw{letter-spacing:-0.016em}.qq{margin-top:1.72em}.qr{line-height:24px}.qs{letter-spacing:0}.rc{margin-top:0.94em}.sl{margin-bottom:104px}.st{flex-direction:row}.sy{margin-bottom:0}.sz{margin-right:20px}.tm{max-width:500px}.uh{margin-bottom:88px}.uk{margin-bottom:72px}.uy{width:min-width}.vd{padding-top:72px}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">.k{display:none}.u{display:flex}.v{justify-content:space-between}.bt{width:24px}.cd{margin:0 24px}.cs{height:40px}.cz{margin-bottom:44px}.dl{margin-bottom:32px}.dz{font-size:13px}.ea{line-height:20px}.ei{padding:0px 8px 1px}.fv{margin-bottom:4px}.hb{font-size:32px}.hc{margin-top:1.01em}.hd{margin-bottom:24px}.he{line-height:38px}.hf{letter-spacing:-0.014em}.hw{align-items:flex-start}.iz{flex-direction:column}.jc{margin-bottom:2px}.jr{margin:24px 0 0}.js{padding:0}.kh> *{margin-right:8px}.ki> :last-child{margin-right:8px}.ky{margin-left:0px}.ma{margin:0}.mq{border:1px solid #F2F2F2}.mr{border-radius:99em}.ms{padding:0px 16px 0px 12px}.mt{height:38px}.mu{align-items:center}.mw svg{margin-right:8px}.ne{font-size:18px}.nf{margin-top:1.56em}.ng{line-height:28px}.nh{letter-spacing:-0.003em}.ny{max-width:100%}.og{margin-top:40px}.ov{margin-top:1.34em}.pp{font-size:20px}.pq{margin-top:1.2em}.pr{line-height:24px}.ps{letter-spacing:0}.qo{font-size:16px}.qp{margin-top:1.23em}.rb{margin-top:0.67em}.sk{margin-bottom:96px}.ta{margin-bottom:20px}.tb{margin-right:0}.ts{font-size:24px}.tt{line-height:30px}.tu{letter-spacing:-0.016em}.ug{margin-bottom:64px}.ux{width:100%}.vc{padding-top:48px}.mv:hover{border-color:#E5E5E5}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="print">.sc{display:none}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">.jm{max-height:none}</style><style type="text/css" data-fela-rehydration="582" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">.om{transition:transform 300ms cubic-bezier(0.2, 0, 0.2, 1)}</style></head><body><div id="root"><div class="a b c"><div class="d e f g h i j k"></div><script>document.domain = document.domain;</script><div class="l c"><div class="l m n o c"><div class="p q r s t u v w x i d y z"><a class="du ag dv bf ak b am an ao ap aq ar as at s u w i d q dw z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2Fc90e073e0052&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---top_nav_layout_nav----------------------------------" rel="noopener follow">Open in app<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 10 10" class="dt"><path fill="currentColor" d="M.985 8.485a.375.375 0 1 0 .53.53zM8.75 1.25h.375A.375.375 0 0 0 8.75.875zM8.375 6.5a.375.375 0 1 0 .75 0zM3.5.875a.375.375 0 1 0 0 .75zm-1.985 8.14 7.5-7.5-.53-.53-7.5 7.5zm6.86-7.765V6.5h.75V1.25zM3.5 1.625h5.25v-.75H3.5z"></path></svg></a><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------">Sign in</a></span></p></div></div></div><div class="p q r ab ac"><div class="ab q ae"><a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" rel="noopener follow" href="/?source=---top_nav_layout_nav----------------------------------"><svg xmlns="http://www.w3.org/2000/svg" width="719" height="160" fill="none" viewBox="0 0 719 160" class="au av aw"><path fill="#242424" d="m174.104 9.734.215-.047V8.02H130.39L89.6 103.89 48.81 8.021H1.472v1.666l.212.047c8.018 1.81 12.09 4.509 12.09 14.242V137.93c0 9.734-4.087 12.433-12.106 14.243l-.212.047v1.671h32.118v-1.665l-.213-.048c-8.018-1.809-12.089-4.509-12.089-14.242V30.586l52.399 123.305h2.972l53.925-126.743V140.75c-.687 7.688-4.721 10.062-11.982 11.701l-.215.05v1.652h55.948v-1.652l-.215-.05c-7.269-1.639-11.4-4.013-12.087-11.701l-.037-116.774h.037c0-9.733 4.071-12.432 12.087-14.242m25.555 75.488c.915-20.474 8.268-35.252 20.606-35.507 3.806.063 6.998 1.312 9.479 3.714 5.272 5.118 7.751 15.812 7.368 31.793zm-.553 5.77h65.573v-.275c-.186-15.656-4.721-27.834-13.466-36.196-7.559-7.227-18.751-11.203-30.507-11.203h-.263c-6.101 0-13.584 1.48-18.909 4.16-6.061 2.807-11.407 7.003-15.855 12.511-7.161 8.874-11.499 20.866-12.554 34.343q-.05.606-.092 1.212a50 50 0 0 0-.065 1.151 85.807 85.807 0 0 0-.094 5.689c.71 30.524 17.198 54.917 46.483 54.917 25.705 0 40.675-18.791 44.407-44.013l-1.886-.664c-6.557 13.556-18.334 21.771-31.738 20.769-18.297-1.369-32.314-19.922-31.042-42.395m139.722 41.359c-2.151 5.101-6.639 7.908-12.653 7.908s-11.513-4.129-15.418-11.63c-4.197-8.053-6.405-19.436-6.405-32.92 0-28.067 8.729-46.22 22.24-46.22 5.657 0 10.111 2.807 12.236 7.704zm43.499 20.008c-8.019-1.897-12.089-4.722-12.089-14.951V1.309l-48.716 14.353v1.757l.299-.024c6.72-.543 11.278.386 13.925 2.83 2.072 1.915 3.082 4.853 3.082 8.987v18.66c-4.803-3.067-10.516-4.56-17.448-4.56-14.059 0-26.909 5.92-36.176 16.672-9.66 11.205-14.767 26.518-14.767 44.278-.003 31.72 15.612 53.039 38.851 53.039 13.595 0 24.533-7.449 29.54-20.013v16.865h43.711v-1.746zM424.1 19.819c0-9.904-7.468-17.374-17.375-17.374-9.859 0-17.573 7.632-17.573 17.374s7.721 17.374 17.573 17.374c9.907 0 17.375-7.47 17.375-17.374m11.499 132.546c-8.019-1.897-12.089-4.722-12.089-14.951h-.035V43.635l-43.714 12.551v1.705l.263.024c9.458.842 12.047 4.1 12.047 15.152v81.086h43.751v-1.746zm112.013 0c-8.018-1.897-12.089-4.722-12.089-14.951V43.635l-41.621 12.137v1.71l.246.026c7.733.813 9.967 4.257 9.967 15.36v59.279c-2.578 5.102-7.415 8.131-13.274 8.336-9.503 0-14.736-6.419-14.736-18.073V43.638l-43.714 12.55v1.703l.262.024c9.459.84 12.05 4.097 12.05 15.152v50.17a56.3 56.3 0 0 0 .91 10.444l.787 3.423c3.701 13.262 13.398 20.197 28.59 20.197 12.868 0 24.147-7.966 29.115-20.43v17.311h43.714v-1.747zm169.818 1.788v-1.749l-.213-.05c-8.7-2.006-12.089-5.789-12.089-13.49v-63.79c0-19.89-11.171-31.761-29.883-31.761-13.64 0-25.141 7.882-29.569 20.16-3.517-13.01-13.639-20.16-28.606-20.16-13.146 0-23.449 6.938-27.869 18.657V43.643L545.487 55.68v1.715l.263.024c9.345.829 12.047 4.181 12.047 14.95v81.784h40.787v-1.746l-.215-.053c-6.941-1.631-9.181-4.606-9.181-12.239V66.998c1.836-4.289 5.537-9.37 12.853-9.37 9.086 0 13.692 6.296 13.692 18.697v77.828h40.797v-1.746l-.215-.053c-6.94-1.631-9.18-4.606-9.18-12.239V75.066a42 42 0 0 0-.578-7.26c1.947-4.661 5.86-10.177 13.475-10.177 9.214 0 13.691 6.114 13.691 18.696v77.828z"></path></svg></a><div class="ax h"><div class="ab ay az ba bb q bc bd"><div class="bm" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults"></div><div class="bn bo ab"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div><input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ay be bf bg z bh bi bj bk bl" placeholder="Search" value=""/></div></div></div><div class="h k w fg fh"><div class="fi ab"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" rel="noopener follow" href="/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---top_nav_layout_nav-----------------------new_post_topnav-----------"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Write"><path fill="currentColor" d="M14 4a.5.5 0 0 0 0-1zm7 6a.5.5 0 0 0-1 0zm-7-7H4v1h10zM3 4v16h1V4zm1 17h16v-1H4zm17-1V10h-1v10zm-1 1a1 1 0 0 0 1-1h-1zM3 20a1 1 0 0 0 1 1v-1zM4 3a1 1 0 0 0-1 1h1z"></path><path stroke="currentColor" d="m17.5 4.5-8.458 8.458a.25.25 0 0 0-.06.098l-.824 2.47a.25.25 0 0 0 .316.316l2.47-.823a.25.25 0 0 0 .098-.06L19.5 6.5m-2-2 2.323-2.323a.25.25 0 0 1 .354 0l1.646 1.646a.25.25 0 0 1 0 .354L19.5 6.5m-2-2 2 2"></path></svg><div class="dt l">Write</div></div></a></span></div></div><div class="k j i d"><div class="fi ab"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" rel="noopener follow" href="/search?source=---top_nav_layout_nav----------------------------------"><div class="bf b bg z du fj fk ab q fl fm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-label="Search"><path fill="currentColor" fill-rule="evenodd" d="M4.092 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0m6.95-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .79-.79l-3.73-3.73A8.05 8.05 0 0 0 11.042 3z" clip-rule="evenodd"></path></svg></div></a></div></div><div class="fi h k j"><div class="ab q"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><button class="bf b dx dy eh dz ea ei eb ec ej ek ee el em eg eo ep eq er es et eu ev ew ex ey ez fa fb fc fd bm fe ff" data-testid="headerSignUpButton">Sign up</button></span></p><div class="ax l"><p class="bf b dx dy dz ea eb ec ed ee ef eg du"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;source=post_page---top_nav_layout_nav-----------------------global_nav-----------">Sign in</a></span></p></div></div></div><div class="l" aria-hidden="false"><button class="ay fn am ab q ao fo fp fq" aria-label="user options menu" data-testid="headerUserIcon"><div class="l fj"><img alt="" class="l fd by bz ca cx" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/><div class="fr by l bz ca fs n ay ft"></div></div></button></div></div></div><div class="l"><div class="fu fv fw fx fy l"><div class="ab cb"><div class="ci bh fz ga gb gc"></div></div><article><div class="l"><div class="l"><span class="l"></span><section><div><div class="fs gi gj gk gl gm"></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><div><h1 id="fcc9" class="pw-post-title gs gt gu bf gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu bk" data-testid="storyTitle">Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses</h1><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hv hw hx hy hz ab"><div><div class="ab ia"><div><div class="bm" aria-hidden="false"><a rel="noopener follow" href="/@chiajy?source=post_page---byline--c90e073e0052--------------------------------"><div class="l ib ic by id ie"><div class="l fj"><img alt="Chia Jeng Yang" class="l fd by dd de cx" src="https://miro.medium.com/v2/resize:fill:88:88/1*93LozG419VJY8XaqrTstnw.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"/><div class="if by l dd de fs n ig ft"></div></div></div></a></div></div><div class="ih ab fj"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/enterprise-rag?source=post_page---byline--c90e073e0052--------------------------------" rel="noopener follow"><div class="l ii ij by id ik"><div class="l fj"><img alt="WhyHow.AI" class="l fd by br il cx" src="https://miro.medium.com/v2/resize:fill:48:48/1*pgVFKfshcigm3MgBLdwN-A.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto"/><div class="if by l br il fs n ig ft"></div></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="im ab q"><div class="ab q in"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b io ip bk"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" data-testid="authorName" rel="noopener follow" href="/@chiajy?source=post_page---byline--c90e073e0052--------------------------------">Chia Jeng Yang</a></p></div></div></div><span class="ir is" aria-hidden="true"><span class="bf b bg z du">·</span></span><p class="bf b io ip du"><span><a class="it iu ah ai aj ak al am an ao ap aq ar ex iv iw" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F6975d2c42b25&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;user=Chia+Jeng+Yang&amp;userId=6975d2c42b25&amp;source=post_page-6975d2c42b25--byline--c90e073e0052---------------------post_header-----------">Follow</a></span></p></div></div></span></div></div><div class="l ix"><span class="bf b bg z du"><div class="ab cn iy iz ja"><div class="jb jc ab"><div class="bf b bg z du ab jd"><span class="je l ix">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar iq ab q" data-testid="publicationName" href="https://medium.com/enterprise-rag?source=post_page---byline--c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b bg z jf jg jh ji jj jk jl jm bk">WhyHow.AI</p></a></div></div></div><div class="h k"><span class="ir is" aria-hidden="true"><span class="bf b bg z du">·</span></span></div></div><span class="bf b bg z du"><div class="ab ae"><span data-testid="storyReadTime">16 min read</span><div class="jn jo l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z du">·</span></span></div><span data-testid="storyPublishDate">Sep 7, 2024</span></div></span></div></span></div></div></div><div class="ab cp jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke"><div class="h k w fg fh q"><div class="ku l"><div class="ab q kv kw"><div class="pw-multi-vote-icon fj je kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fenterprise-rag%2Fc90e073e0052&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;user=Chia+Jeng+Yang&amp;userId=6975d2c42b25&amp;source=---header_actions--c90e073e0052---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="la ao lb lc ld le am lf lg lh kz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><p class="bf b dv z du"><span class="lp">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao la ls lt ab q fk lu lv" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lr"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b dv z du"><span class="pw-responses-count lq lr">2</span></p></button></div></div></div><div class="ab q kf kg kh ki kj kk kl km kn ko kp kq kr ks kt"><div class="lw k j i d"></div><div class="h k"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc90e073e0052&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;source=---header_actions--c90e073e0052---------------------bookmark_footer-----------"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lx" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="fd ly cn"><div class="l ae"><div class="ab cb"><div class="lz ma mb mc md me ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af fk ah ai aj ak al mf an ao ap ex mg mh lv mi mj mk ml mm s mn mo mp mq mr ms mt u mu mv mw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fk ah ai aj ak al mf an ao ap ex mg mh lv mi mj mk ml mm s mn mo mp mq mr ms mt u mu mv mw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg><div class="j i d"><p class="bf b bg z du">Share</p></div></button></div></div></div></div></div></div></div></div></div><p id="a9fd" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Authored by: Timothy Chung, Chia Jeng Yang</p><p id="d200" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk"><strong class="mz gv">Update: We have recently open-sourced our KG Studio here: </strong><a class="af nv" rel="noopener" href="/enterprise-rag/open-sourcing-the-whyhow-knowledge-graph-studio-powered-by-nosql-edce283fb341"><strong class="mz gv">https://medium.com/enterprise-rag/open-sourcing-the-whyhow-knowledge-graph-studio-powered-by-nosql-edce283fb341</strong></a></p><p id="6e9d" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">In this article and open source repository, we wanted to demonstrate intelligent navigation of a legal document’s clauses done through a multi-agent system that leverages a lexical graph (document hierarchy) and chunk linking within a multi-graph multi-agent workflow for a regulatory document. The stack we used here was <a class="af nv" href="http://reducto.ai" rel="noopener ugc nofollow" target="_blank">Reducto.AI</a>, <a class="af nv" href="http://whyhow.ai" rel="noopener ugc nofollow" target="_blank">WhyHow.AI</a>, <a class="af nv" href="https://langchain-ai.github.io/" rel="noopener ugc nofollow" target="_blank">Langgraph</a>, <a class="af nv" href="https://www.llamaindex.ai/" rel="noopener ugc nofollow" target="_blank">LlamaIndex</a>. You can find access to the open source repository <a class="af nv" href="https://github.com/whyhow-ai/recursive-retrieval" rel="noopener ugc nofollow" target="_blank"><strong class="mz gv">here</strong></a>.</p></div></div><div class="nw"><div class="ab cb"><div class="lz nx ma ny mb nz cf oa cg ob ci bh"><figure class="of og oh oi oj nw ok ol paragraph-image"><div role="button" tabindex="0" class="om on fj oo bh op"><div class="oc od oe"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*jZtN0NMc5TvzTdgO 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*jZtN0NMc5TvzTdgO 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*jZtN0NMc5TvzTdgO 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*jZtN0NMc5TvzTdgO 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*jZtN0NMc5TvzTdgO 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*jZtN0NMc5TvzTdgO 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/0*jZtN0NMc5TvzTdgO 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*jZtN0NMc5TvzTdgO 640w, https://miro.medium.com/v2/resize:fit:720/0*jZtN0NMc5TvzTdgO 720w, https://miro.medium.com/v2/resize:fit:750/0*jZtN0NMc5TvzTdgO 750w, https://miro.medium.com/v2/resize:fit:786/0*jZtN0NMc5TvzTdgO 786w, https://miro.medium.com/v2/resize:fit:828/0*jZtN0NMc5TvzTdgO 828w, https://miro.medium.com/v2/resize:fit:1100/0*jZtN0NMc5TvzTdgO 1100w, https://miro.medium.com/v2/resize:fit:2000/0*jZtN0NMc5TvzTdgO 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh me oq c" width="1000" height="557" loading="eager" role="presentation"/></picture></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="b048" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Some of the very specific problems that we have come across in documents, particularly legal documents, was the need to build a <a class="af nv" rel="noopener" href="/enterprise-rag/deterministic-document-structure-based-retrieval-472682f9629a">document hierarchy</a> of the different clauses within the document. This is as clauses sometimes referred to other clauses to get the full meaning and context.</p><p id="5f3d" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">In order to gain the full context, you then had to <a class="af nv" rel="noopener" href="/enterprise-rag/advanced-rag-and-the-3-types-of-recursive-retrieval-cdd0fa52e1ba">recursively navigate</a> and retrieve any mentioned clauses (and even footnotes!), navigate the document hierarchy graph to find the mentioned clause, see if any other clauses were mentioned, and to repeat. <a class="af nv" rel="noopener" href="/enterprise-rag/advanced-rag-and-the-3-types-of-recursive-retrieval-cdd0fa52e1ba">Recursive retrieval</a> can be done on a range of other document elements outside legal documents including page numbers, multimodal data like images, hyperlinks to other documents or external data, etc.</p><p id="dcb3" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Legal documents have always fascinated me when it comes to graph-based traversal and retrieval, given the structured nature of the documents. There is also a very specific structured retrieval step that must also always take place in the context of a legal document in the guise of the definitions page, where every specific important term has a very specific variable or fixed definition that can change depending on the nature of the document.</p><p id="aa99" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">In this Notebook and example, we want to show how you can easily create a document hierarchy graph of the clauses within a legal document, a graph of the definitions in the legal document, and a multi-graph multi-agent recursive retrieval process that answers questions by intelligently navigating through both the document hierarchy graph and the definition graph to gain the full context for questions posed against it.</p><p id="7b3b" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">In this example, we take a simple regulatory document issued by the Malaysian Central Bank, specifically <a class="af nv" href="https://www.bnm.gov.my/documents/20124/938039/pd_compliance_Oct2015+%28Reissuance_May2016%29.pdf/6da52ca8-734a-d2fb-e214-093430ea8fb6?t=1592219195301" rel="noopener ugc nofollow" target="_blank"><strong class="mz gv">this document</strong></a> governing compliance rules in a variety of organizations.</p><p id="130b" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">The question we want to get an answer to is the question:- <strong class="mz gv">How can the Board and the CCO manage control functions?</strong></p><p id="499e" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">The ideal flow to answer this question would be:</p><ul class=""><li id="110f" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">Gives me a definition of CCO from definition page</li><li id="ed8b" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Retrieval of information from Clause 6.3 &amp; Clause 7.2.</li><li id="543b" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Detection of “Refer to Para 7.3 and 7.4” in Clause 7.2.</li><li id="133b" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Traverses to and retrieves Para 7.3 and 7.4</li><li id="fce0" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Detection of the mention of Para 9.1 and the retrieval of Para 9.1</li></ul><p id="4a73" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">As a quick benchmark, when we run this through ChatGPT using GPT4o (which has embedded agentic reasoning), we get the following answer:</p><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="4bff" class="pd pe gu pa b bg pf pg l ph pi">The management of control functions by the Board and the Chief Compliance <br/>Officer (CCO) involves several key responsibilities as outlined in the <br/>compliance document:<br/><br/><strong class="pa gv">Responsibilities of the Board:</strong><br/>1. Oversight of Compliance Risk Management: The Board is responsible for <br/>overseeing the management of compliance risk within the financial institution. This includes approving the compliance policy, establishing the compliance function, and appointing the CCO.<br/>2. Approval and Support for the Compliance Function: The Board must <br/>ensure that the compliance function and the CCO have the appropriate standing, <br/>authority, and independence to carry out their duties effectively. The Board <br/>must also ensure that the compliance function is adequately resourced.<br/>3.Engagement with the CCO: The Board should engage with the CCO regularly to <br/>discuss issues faced by the compliance function and ensure the CCO has direct <br/>access to the Board.<br/>4. Annual Evaluation: The Board must evaluate the effectiveness of the <br/>institution’s management of compliance risk at least annually, considering <br/>assessments from senior management, internal audit, and the CCO.<br/><br/><strong class="pa gv">Responsibilities of the Chief Compliance Officer (CCO):</strong><br/>1. Coordination and Management of Compliance Risk: The CCO is responsible for <br/>coordinating the identification, management, and monitoring of compliance risk<br/>across the institution. This includes ensuring compliance monitoring and <br/>testing are consistent across the organization.<br/>2. Reporting and Advising: The CCO must report regularly to senior management <br/>on the findings and analysis of compliance risks and must ensure that reports <br/>are readily available to internal audit and regulatory authorities. The CCO <br/>also advises the Board and senior management on legal and regulatory <br/>requirements, keeping them informed of developments and their implications.<br/>3. Independence: The CCO must maintain independence from business lines to <br/>effectively carry out the role of a control function. This includes ensuring <br/>that there is no conflict of interest in their responsibilities, reporting <br/>lines, or remuneration.<br/>4. Resources and Training: The CCO must ensure that the compliance function <br/>is sufficiently resourced with officers who have the necessary qualifications <br/>and experience. The CCO is also responsible for ensuring that adequate training<br/> is provided to officers on relevant legal and regulatory requirements.<br/><br/><strong class="pa gv">Interaction with Other Control Functions:</strong><br/>The compliance function should be organized in a way that allows effective <br/>management of compliance risk, considering the size, nature, and complexity of<br/>the financial institution’s operations. Where responsibilities are shared <br/>between a dedicated compliance unit and other control functions,<br/>clear documentation and coordination are required to ensure that the CCO can <br/>perform their duties effectively without impairing independence or focus.<br/>By fulfilling these responsibilities, the Board and the CCO can ensure that <br/>the institution&#x27;s compliance risks are managed effectively, supporting the <br/>overall safety and soundness of the financial institution.</span></pre><p id="2adc" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">This answer is interesting but incomplete because it:</p><ul class=""><li id="0628" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">Seems to specifically pick up on the keyword ‘compliance’ and highlights all the compliance obligations that are relevant to other clauses as opposed to specifically the board and the CCO. For example, coordination across jurisdictions (Para 8.2) was raised in the context of ‘compliance’, and remuneration independence (Para 7.8) was raised in the context of ‘compliance’.</li><li id="1daf" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Crucially, it seems to have missed the explicit references to Para 7.3, and 7.4 that explicitly state a key obligation between the Board and the CCO around Board approvals being required when the CCO shares control functions. It has also missed Para 9.1 about the separation between audit and compliance functions.</li></ul><p id="2644" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">This is understandable given that recursive retrieval of clauses, pages and footers are not explicitly part of the typical semantic similarity retrieval processes that govern RAG.</p><h1 id="7ea5" class="pj pe gu bf pk pl pm pn po pp pq pr ps pt pu pv pw px py pz qa qb qc qd qe qf bk"><strong class="al">Summary of Multi-Graph Multi-Agent Workflow Developed</strong></h1></div></div><div class="nw"><div class="ab cb"><div class="lz nx ma ny mb nz cf oa cg ob ci bh"><figure class="of og oh oi oj nw ok ol paragraph-image"><div role="button" tabindex="0" class="om on fj oo bh op"><div class="oc od qg"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*I-ULV2KUEgZNI5ZuT9ApOg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*I-ULV2KUEgZNI5ZuT9ApOg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*I-ULV2KUEgZNI5ZuT9ApOg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*I-ULV2KUEgZNI5ZuT9ApOg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*I-ULV2KUEgZNI5ZuT9ApOg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*I-ULV2KUEgZNI5ZuT9ApOg.png 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/1*I-ULV2KUEgZNI5ZuT9ApOg.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*I-ULV2KUEgZNI5ZuT9ApOg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*I-ULV2KUEgZNI5ZuT9ApOg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*I-ULV2KUEgZNI5ZuT9ApOg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*I-ULV2KUEgZNI5ZuT9ApOg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*I-ULV2KUEgZNI5ZuT9ApOg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*I-ULV2KUEgZNI5ZuT9ApOg.png 1100w, https://miro.medium.com/v2/resize:fit:2000/1*I-ULV2KUEgZNI5ZuT9ApOg.png 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh me oq c" width="1000" height="777" loading="eager" role="presentation"/></picture></div></div><figcaption class="qh ff qi oc od qj qk bf b bg z du">For those looking to understand what each agent does, we include code snippets for each agent in the Appendix</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh fz ga gb gc"><h2 id="782d" class="ql pe gu bf pk qm qn dy po qo qp ea ps ni qq qr qs nm qt qu qv nq qw qx qy qz bk"><strong class="al">Creation of the Graphs</strong></h2><p id="819c" class="pw-post-body-paragraph mx my gu mz b na ra nc nd ne rb ng nh ni rc nk nl nm rd no np nq re ns nt nu gn bk">Within this Notebook, we first extract the document structure parsed by <a class="af nv" href="https://reducto.ai/" rel="noopener ugc nofollow" target="_blank">Reducto’s</a> document ingestion engine. The document structure breaks down every page into different elements, such as a Section Header, a List Item, or a Footer.</p></div></div><div class="nw"><div class="ab cb"><div class="lz nx ma ny mb nz cf oa cg ob ci bh"><figure class="of og oh oi oj nw ok ol paragraph-image"><div role="button" tabindex="0" class="om on fj oo bh op"><div class="oc od oe"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*rqge8YhCpZdAi7PV 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*rqge8YhCpZdAi7PV 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*rqge8YhCpZdAi7PV 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*rqge8YhCpZdAi7PV 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*rqge8YhCpZdAi7PV 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*rqge8YhCpZdAi7PV 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/0*rqge8YhCpZdAi7PV 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*rqge8YhCpZdAi7PV 640w, https://miro.medium.com/v2/resize:fit:720/0*rqge8YhCpZdAi7PV 720w, https://miro.medium.com/v2/resize:fit:750/0*rqge8YhCpZdAi7PV 750w, https://miro.medium.com/v2/resize:fit:786/0*rqge8YhCpZdAi7PV 786w, https://miro.medium.com/v2/resize:fit:828/0*rqge8YhCpZdAi7PV 828w, https://miro.medium.com/v2/resize:fit:1100/0*rqge8YhCpZdAi7PV 1100w, https://miro.medium.com/v2/resize:fit:2000/0*rqge8YhCpZdAi7PV 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh me oq c" width="1000" height="748" loading="eager" role="presentation"/></picture></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="8c5d" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">The elements are then combined based on the order they appear and their implied hierarchies, for example, a Section Header is a parent of a List Item. We then analyze the links in the document to identify connections between extracted elements that can be modeled in the lexical graph.</p></div></div><div class="nw"><div class="ab cb"><div class="lz nx ma ny mb nz cf oa cg ob ci bh"><figure class="of og oh oi oj nw ok ol paragraph-image"><div role="button" tabindex="0" class="om on fj oo bh op"><div class="oc od oe"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*BcjSoFxrgE_RcBAT 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*BcjSoFxrgE_RcBAT 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*BcjSoFxrgE_RcBAT 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*BcjSoFxrgE_RcBAT 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*BcjSoFxrgE_RcBAT 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*BcjSoFxrgE_RcBAT 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/0*BcjSoFxrgE_RcBAT 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*BcjSoFxrgE_RcBAT 640w, https://miro.medium.com/v2/resize:fit:720/0*BcjSoFxrgE_RcBAT 720w, https://miro.medium.com/v2/resize:fit:750/0*BcjSoFxrgE_RcBAT 750w, https://miro.medium.com/v2/resize:fit:786/0*BcjSoFxrgE_RcBAT 786w, https://miro.medium.com/v2/resize:fit:828/0*BcjSoFxrgE_RcBAT 828w, https://miro.medium.com/v2/resize:fit:1100/0*BcjSoFxrgE_RcBAT 1100w, https://miro.medium.com/v2/resize:fit:2000/0*BcjSoFxrgE_RcBAT 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh me oq c" width="1000" height="529" loading="eager" role="presentation"/></picture></div></div><figcaption class="qh ff qi oc od qj qk bf b bg z du"><a class="af nv" href="https://whyhowai.netlify.app/public/graph/66d7eebbeda622fc957cc7a0" rel="noopener ugc nofollow" target="_blank">Link to Document Hierarchy/Lexical Graph</a></figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh fz ga gb gc"><figure class="of og oh oi oj nw oc od paragraph-image"><div role="button" tabindex="0" class="om on fj oo bh op"><div class="oc od rf"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*oU24xJokx2eozjy8_COAig.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*oU24xJokx2eozjy8_COAig.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*oU24xJokx2eozjy8_COAig.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*oU24xJokx2eozjy8_COAig.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*oU24xJokx2eozjy8_COAig.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*oU24xJokx2eozjy8_COAig.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oU24xJokx2eozjy8_COAig.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*oU24xJokx2eozjy8_COAig.png 640w, https://miro.medium.com/v2/resize:fit:720/1*oU24xJokx2eozjy8_COAig.png 720w, https://miro.medium.com/v2/resize:fit:750/1*oU24xJokx2eozjy8_COAig.png 750w, https://miro.medium.com/v2/resize:fit:786/1*oU24xJokx2eozjy8_COAig.png 786w, https://miro.medium.com/v2/resize:fit:828/1*oU24xJokx2eozjy8_COAig.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*oU24xJokx2eozjy8_COAig.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*oU24xJokx2eozjy8_COAig.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/><img alt="" class="bh me oq c" width="700" height="312" loading="eager" role="presentation"/></picture></div></div></figure><p id="b68a" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">We then import the chunks and triples into WhyHow’s Knowledge Graph Studio using our SDK <a class="af nv" href="https://whyhow-ai.github.io/whyhow-sdk-docs/examples/create_graph_from_triples/" rel="noopener ugc nofollow" target="_blank">here</a> to create the Lexical Graph.</p><p id="3cef" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">We also built a graph of the legal definitions for the document. Uniquely in legal documents, there is a definitions section for each document that helps to define the specific way certain terms must be interpreted. This can differ by document, use-case and client. In this case, the document contained definitions on pages 4–5. These texts were extracted and passed into GPT-4o with a prompt to extract the legal terms and their definitions verbatim and return them as structured output. The output was turned into a CSV file and uploaded as a separate graph using the SDK and a predefined schema. This Definition Graph is invoked by the Definition Agent when needed to augment the context with the specific relevant definitions. In this case, the Definition Agent is invoked after the initial clauses are retrieved.</p></div></div><div class="nw"><div class="ab cb"><div class="lz nx ma ny mb nz cf oa cg ob ci bh"><figure class="of og oh oi oj nw ok ol paragraph-image"><div role="button" tabindex="0" class="om on fj oo bh op"><div class="oc od oe"><picture><source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/0*LEQpckUFmmnOG8SA 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/0*LEQpckUFmmnOG8SA 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/0*LEQpckUFmmnOG8SA 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/0*LEQpckUFmmnOG8SA 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/0*LEQpckUFmmnOG8SA 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/0*LEQpckUFmmnOG8SA 1100w, https://miro.medium.com/v2/resize:fit:2000/format:webp/0*LEQpckUFmmnOG8SA 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px" type="image/webp"/><source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/0*LEQpckUFmmnOG8SA 640w, https://miro.medium.com/v2/resize:fit:720/0*LEQpckUFmmnOG8SA 720w, https://miro.medium.com/v2/resize:fit:750/0*LEQpckUFmmnOG8SA 750w, https://miro.medium.com/v2/resize:fit:786/0*LEQpckUFmmnOG8SA 786w, https://miro.medium.com/v2/resize:fit:828/0*LEQpckUFmmnOG8SA 828w, https://miro.medium.com/v2/resize:fit:1100/0*LEQpckUFmmnOG8SA 1100w, https://miro.medium.com/v2/resize:fit:2000/0*LEQpckUFmmnOG8SA 2000w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 1000px"/><img alt="" class="bh me oq c" width="1000" height="575" loading="eager" role="presentation"/></picture></div></div><figcaption class="qh ff qi oc od qj qk bf b bg z du"><a class="af nv" href="https://whyhowai.netlify.app/public/graph/66d7edbaeda622fc957cc73f" rel="noopener ugc nofollow" target="_blank">Link to Definition Graph</a></figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="d699" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">We then imported the nodes from WhyHow into the notebook, and used LlamaIndex to locally index the information of the nodes, preserving the embeddings generated with WhyHow. We use a combination of LlamaIndex’s Vector, BM25, and Keyword retrievers. The addition of the BM25 and keyword retrievers are helpful in a legal document use case where the query and retrieval process requires precision with terminology. BM25 helps to identify key terms in highly repetitive text, while the keyword retriever ensures that important terms, despite occurring infrequently, are retrieved as needed.</p><p id="c150" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">LangGraph was used to build a multi-agent workflow around the lexical graph with the WhyHow SDK and GPT-4o.Essentially, when a query is passed, the system first searches for the relevant vector chunks through the Initial Search Agent. In this case, the vector chunks are clauses or sub-clauses. The Definition Agent is subsequently called here to augment the clauses with the relevant definitions. The Router Agent then detects if there are additional linked sections or footers that it needs to refer to, and if so, to retrieve the appropriate sections and considers them. The Recursive Retrieval Agent will recursively do so if the subsequent retrieved clauses (as is the case here), refers to even more clauses.</p><p id="7f6e" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">The first clauses it retrieves are Paragraphs 6.3 and 7.2. The Definitions Graph is referenced to check if there is any additional context via the definitions section that should be included. The additional definitions for “CCO” and “Senior Management” are included.</p><p id="7bdf" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Within Paragraph 6.3, there is the following sub-paragraph 6.3.f:</p><ul class=""><li id="6934" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk"><strong class="mz gv">“where the CCO also carries out responsibilities in respect of other control functions3, be satisfied that a sound overall control environment will not be compromised by the combination of responsibilities performed by the CCO.”</strong></li></ul><p id="a5b6" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Based on the information of the first clause it retrieves, a Router Agent then helps to detect if there are clauses or footers mentioned in the material. In this case, a Footer (Footnote 3) was associated with the first clause. The Router Agent then triggers the Footer Parsing Agent. The Footer Parsing agent identifies the relevant footer and returns the following Footer:</p><ul class=""><li id="1914" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk"><strong class="mz gv">“Refer to paragraphs 7.3 and 7.4.”</strong></li></ul><p id="64ee" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Here, another traversal is required, and the Recursive Retrieval Agent is used to traverse the Lexical Graph and retrieve the chunks/clauses within Paragraphs 7.3 and 7.4.</p><p id="1402" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">This new information from Paragraphs 7.3 and 7.4 is combined together. Paragraph 7.4(b) contains a reference to Paragraph 9.1. here:</p><ul class=""><li id="65b4" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk"><strong class="mz gv">“compliance function responsibilities cannot be shared with, nor can the CCO assume responsibilities for, internal audit as such practices would render the independent review process described in paragraph 9.1 ineffective.”</strong></li></ul><p id="0fb2" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Paragraph 7.4 contains a link to Paragraph 9.1, which the Router Agent detects, and instructs the Recursive Retrieval Agent to retrieve it on the next pass. An Answering Agent tracks all the incoming information to summarize and ultimately formulate the final answer to return to the user.</p><p id="bd0a" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">The final answer constructed reflects our ideal flow and takes in information from the Definitions page, Paragraph 6.3 &amp; 7.2, Footer Note 3, Paragraph 7.3, 7.4, 9.1 and is accurately summarized for the user with all the relevant information taken in with smart traversals.</p><p id="37f2" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">To ensure we did not just get lucky, we ran the final query 3 times, which showed a successful retrieval of the relevant information.</p><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="3296" class="pd pe gu pa b bg pf pg l ph pi">To manage control functions effectively, the Board and the Chief Compliance <br/>Officer (CCO) have distinct responsibilities that they must exercise:<br/><br/><strong class="pa gv">Responsibilities of the Board:</strong><br/>- Approve critical decisions regarding the CCO, including appointment, <br/>remuneration, and termination (<strong class="pa gv">Section 6.3(a)</strong>).<br/>- Ensure the CCO has sufficient stature to engage effectively with senior <br/>management (<strong class="pa gv">Section 6.3(b)</strong>).<br/>- Regularly engage with the CCO to discuss compliance issues and consider <br/>interactions without senior management present (<strong class="pa gv">Section 6.3(c)</strong>).<br/>- Provide the CCO with unimpeded access to communicate with the board directly<br/>(<strong class="pa gv">Section 6.3(d)</strong>).<br/>- Support the CCO with adequate resources to perform duties effectively, <br/>including competent staff (<strong class="pa gv">Section 6.3(e)</strong>).<br/>- Satisfy themselves that combined responsibilities, if any, do not compromise<br/>the control environment (<strong class="pa gv">Section 6.3(f)</strong>).<br/><br/><strong class="pa gv">Responsibilities of the CCO:</strong><br/>- Coordinate the identification and management of institution-wide compliance <br/>risks (<strong class="pa gv">Section 7.2(b)</strong>).<br/>- Ensure consistent conduct of compliance monitoring and testing across the <br/>organization (<strong class="pa gv">Section 7.2(b)</strong>).<br/>- Maintain independence and sufficient focus on compliance duties, even when <br/>tasked with additional control functions (<strong class="pa gv">Section 7.3</strong>).<br/><br/><strong class="pa gv">Shared Responsibilities &amp; Coordination:</strong><br/>- The board must approve any sharing of compliance function responsibilities <br/>between the compliance unit and other control functions (<strong class="pa gv">Section 7.4(a)</strong>).<br/>- Function responsibilities, including timely communication of issues, should <br/>be well-defined and documented (<strong class="pa gv">Section 7.2(a)</strong>).<br/>- Effective arrangements for coordination among control functions should be in<br/>place to facilitate the CCO’s responsibilities (<strong class="pa gv">Section 7.2(d)</strong>).<br/>- Compliance responsibilities must not compromise the separation of the <br/>internal audit function (<strong class="pa gv">Section 9.1</strong>).<br/><br/>The board should ensure comprehensive oversight, and the CCO should maintain<br/>effective coordination and communication across the organization to manage<br/>control functions efficiently.</span></pre><p id="35c9" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">In conclusion through this exercise, we have developed a system that demonstrates the following:</p><ul class=""><li id="5cc6" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">A multi-graph system, with each graph representing a different process and objective within a RAG system.</li><li id="a2bf" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Creating RAG-capable automated lexical graphs with Reducto &amp; WhyHow &amp; LlamaIndex</li><li id="5094" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">A multi-agent system that allowed for smart traversals of documents based on the way the document intends for a human to read and traverse its information, returning answers from each section and sub-section in a structured way</li><li id="de13" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">A multi-graph multi-agent system that is governed with LangGraph.</li></ul></div></div></div><div class="ab cb rg rh ri rj" role="separator"><span class="rk by bm rl rm rn"></span><span class="rk by bm rl rm rn"></span><span class="rk by bm rl rm"></span></div><div class="gn go gp gq gr"><div class="ab cb"><div class="ci bh fz ga gb gc"><p id="9fdb" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">WhyHow.AI’s <a class="af nv" rel="noopener" href="/enterprise-rag/whyhow-ai-kg-studio-platform-beta-rag-native-graphs-1105e5a84ff2">Knowledge Graph Studio Platform</a> (currently in Beta) is the easiest way to build modular, agentic Knowledge Graphs, combining workflows from LLMs, developers and non-technical domain experts.</p><p id="e3c8" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">If you’re thinking about, in the process of, or have already incorporated knowledge graphs in RAG for accuracy, memory and determinism, we’d love to chat at team@whyhow.ai, or follow our newsletter at<a class="af nv" href="https://whyhow.ai/" rel="noopener ugc nofollow" target="_blank"> WhyHow.AI</a>. Join our discussions about rules, determinism and knowledge graphs in RAG on our<a class="af nv" href="https://discord.gg/9bWqrsxgHr" rel="noopener ugc nofollow" target="_blank"> Discord</a>.</p><h2 id="c434" class="ql pe gu bf pk qm qn dy po qo qp ea ps ni qq qr qs nm qt qu qv nq qw qx qy qz bk"><strong class="al">Appendix</strong></h2><p id="8d76" class="pw-post-body-paragraph mx my gu mz b na ra nc nd ne rb ng nh ni rc nk nl nm rd no np nq re ns nt nu gn bk"><strong class="mz gv">Agent code snippets</strong></p><p id="b858" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk"><strong class="mz gv">Definition Agent</strong></p><ul class=""><li id="0c89" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">Retrieves the definitions of terms mentioned in the query.</li></ul><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="8e9e" class="pd pe gu pa b bg pf pg l ph pi">def definitions_search(query_prompt: str, client: Optional[WhyHow]=None) -&gt; Dict[str, str]:<br/>    &quot;&quot;&quot;<br/>    Search for definitions of terms in a question prompt and return them as a dictionary.<br/>    &quot;&quot;&quot;<br/>    if client is None:<br/>        client = WhyHow(api_key=WHYHOW_API_KEY, base_url=WHYHOW_API_URL)<br/><br/>    definitions_response = client.graphs.query_unstructured(<br/>        graph_id=definitions_graph.graph_id,<br/>        query=query_prompt,<br/>    )<br/>    <br/>    response_text = definitions_response.answer<br/>    term_def_pairs = response_text.split(&#x27;\n&#x27;)<br/>    definitions_dict = {}<br/>    <br/>    for pair in term_def_pairs:<br/>        if &#x27;:&#x27; in pair:<br/>            term, definition = pair.split(&#x27;:&#x27;, 1)<br/>            definitions_dict[term.strip()] = definition.strip()<br/>    <br/>    return definitions_dict<br/><br/>query_prompt = &quot;&quot;&quot;Return me definitions for the terms in this query: &quot;How can the Board and the CCO manage control functions?&quot; Ensure the term-definition pairs are separated by newlines, properly capitalised&quot;&quot;&quot;<br/><br/>definitions_dict = definitions_search(query_prompt)<br/><br/><br/>def print_prompt_definitions_dict(definitions_dict):<br/>    prompt = &quot;Relevant Definitions:\n&quot;<br/>    for term, definition in definitions_dict.items():<br/>        prompt += f&quot;{term}: {definition}\n&quot;<br/>    return prompt<br/><br/>print(print_prompt_definitions_dict(definitions_dict))</span></pre><p id="b183" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk"><strong class="mz gv">Router Agent</strong></p><ul class=""><li id="4eb2" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">Decides if the process should stop or continue. Also identifies relevant nodes containing footer information or links to other nodes to be retrieved by the Recursive Retrieval Agent.</li></ul><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="d1bf" class="pd pe gu pa b bg pf pg l ph pi">def router_agent(state: AgentState) -&gt; AgentState:<br/>    # decide if process should should stop or continue<br/><br/>    starter_prompt_footer = f&quot;&quot;&quot;<br/>        You are an intelligent agent overseeing a multi-agent retrieval process of graph nodes from a document. These nodes are to answer the query: <br/>        ```{state[&#x27;query&#x27;]}```<br/>        <br/>        Below this request is a list of nodes that were automatically retrieved. <br/>        <br/>        You must determine if the list of nodes is enough to answer the query. If there isn&#x27;t enough information, you must identify any relevant footer information in the nodes.<br/>        <br/>        A node can footer information asking to look in another section/part of the document, which will require a separate natural language search. <br/>        Example: If the footer says &quot;see paragraph x&quot;, a search query e.g. &quot;Return paragraph x to answer the query &#x27;{state[&#x27;query&#x27;]}&#x27;&quot; should be made. <br/>    <br/>        If there are no further nodes worth analyzing, return an empty response. ONLY RETURN QUERIES FOR FOOTERS THAT ARE RELEVANT TO ANSWERING THE QUERY<br/>        <br/>        Else, if any relevant nodes require a footer search, specify the node_id and the search query.<br/>        Nodes are identified by node_id and must be quoted in backticks.     <br/>    &quot;&quot;&quot;<br/>    <br/>    starter_prompt_link = f&quot;&quot;&quot;<br/>        You are an intelligent agent overseeing a multi-agent retrieval process of graph nodes from a document. These nodes are to answer the query: <br/>        ```{state[&#x27;query&#x27;]}```<br/>        <br/>        Below this request is a list of nodes that were automatically retrieved. <br/>        <br/>        You must determine if the list of nodes is enough to answer the query. If there isn&#x27;t enough information, you must identify any linked nodes that could be worth exploring.<br/>        <br/>        If there are no further nodes worth analyzing, return an empty response.<br/>        <br/>        Return a list of node_ids. ONLY RETURN NODE_IDS for NODES THAT ARE RELEVANT TO ANSWERING THE QUERY. Nodes are identified by node_id and must be quoted in backticks.<br/>    &quot;&quot;&quot;<br/>    <br/>    # collect latest nodes, and all nodes<br/>    last_fetched_nodes_flattened: Dict[str, MultiAgentSearchLocalNode] = {}<br/>    all_nodes_flattened: Dict[str, MultiAgentSearchLocalNode] = {}</span></pre><p id="cbaf" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk"><strong class="mz gv">Supervisor Agent</strong></p><ul class=""><li id="7e29" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">Monitors the context window and prunes nodes if too much context is being used.</li><li id="0bac" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Also keeps track of search failures, if no nodes or relevant information was found for footer searches or linked nodes. If there are too many repeated search failures, it will end the retrieval process prematurely.</li></ul><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="a4d7" class="pd pe gu pa b bg pf pg l ph pi">def supervisor_agent(state:AgentState) -&gt; AgentState:<br/>    <br/>    # Look for search failures. This might be an instance where multiple searches were made for certain parts of the document, but no relevant information was found.<br/>    # This means that the search has to be ended prematurely to prevent infinite loops.<br/>    printout = &quot;&quot;<br/>    for node in state[&quot;previous_nodes&quot;]:<br/>        printout += node.print_node_prompt()<br/>    for node in state[&quot;last_fetched_context_nodes&quot;]:<br/>        printout += node.print_node_prompt()<br/>        <br/>    prompt = f&quot;&quot;&quot;<br/>You are a supervisor agent overseeing the multi-agent retrieval process of graph nodes from a document. The nodes are to answer the query:<br/>```{state[&#x27;query&#x27;]}```<br/><br/><br/>Below is a list of nodes that were automatically retrieved, followed by a list of errors. If there are many similar, repeated errors in the retrieval process , where no further linked or relevant nodes could be retrieved, return END to end the process. Else return CONTINUE. <br/>Return only a single word, either END or CONTINUE.<br/>&quot;&quot;&quot;<br/>    <br/>    completion = openai_client.beta.chat.completions.parse(<br/>        model=&quot;gpt-4o-2024-08-06&quot;,<br/>        messages=[<br/>            {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: prompt},<br/>            {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: printout},<br/>            {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: state[&#x27;search_failures&#x27;]},<br/>        ],<br/>    )</span></pre><p id="f703" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk"><strong class="mz gv">Recursive Agent</strong></p><ul class=""><li id="1471" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">Retrieves information for nodes marked by the Router Agent</li><li id="7773" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">Either fetches new linked nodes, or does a keyword search on the document for the footer (e.g. if the Footer asks to refer to paragraph 7.3 and 7.4 without a link, a search is done instead). An LLM call will prune redundant nodes at this step</li></ul><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="d8bd" class="pd pe gu pa b bg pf pg l ph pi">def recursive_retrieval(state: AgentState) -&gt; AgentState:<br/><br/>    current_nodes = state[&quot;last_fetched_context_nodes&quot;]<br/>    <br/>    for current_node in current_nodes:<br/>        state[&quot;previous_nodes&quot;].append(current_node)<br/><br/>    new_current_nodes = []<br/><br/>    # look up the nodes to fetch by id    <br/>    <br/>    for node_id in state[&quot;node_links_to_fetch&quot;]:<br/>    # sometimes GPT returns node ids with or without backticks<br/>        if node_id[0] == &quot;`&quot;:<br/>            node_id = node_id[1:-1]<br/>        if node_id in local_nodes_map:<br/>            new_current_nodes.append(local_nodes_map[node_id])<br/>        else:<br/>            state[&quot;search_failures&quot;].append(f&quot;Failed to fetch node with id: {node_id}&quot;)<br/><br/><br/>    for node_id, search_query in state[&quot;node_footers_to_fetch&quot;].items():<br/>        # fetch nodes by keyword and bm25 search<br/>        footer_retrieved_nodes = retrieve_with_keywords_bm25(search_query)<br/>        # LLM prunes nodes that are not relevant<br/>        footer_retrieved_nodes, _ = prune_nodes(search_query, footer_retrieved_nodes)<br/><br/>        for node in footer_retrieved_nodes:<br/>            new_current_nodes.append(node)<br/><br/>        # if no nodes fetched, log failure<br/>        if len(footer_retrieved_nodes) == 0:<br/>            state[&quot;search_failures&quot;].append(<br/>                f&quot;Failed to fetch nodes for query: {search_query}&quot;<br/>            )<br/><br/>    state[&quot;last_fetched_context_nodes&quot;] = new_current_nodes<br/>    state[&quot;pass_count&quot;] += 1<br/>    state[&quot;node_footers_to_fetch&quot;] = {}<br/>    state[&quot;node_links_to_fetch&quot;] = []<br/><br/>    return state</span></pre><p id="44c3" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk"><strong class="mz gv">Answering Agent</strong></p><ul class=""><li id="7525" class="mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu or os ot bk">Given all the information collected in the retrieval process, and the definitions from the document, it finalizes the answer to the query</li><li id="4787" class="mx my gu mz b na ou nc nd ne ov ng nh ni ow nk nl nm ox no np nq oy ns nt nu or os ot bk">It also tries to link to sources e.g. paragraph numbers wherever possible</li></ul><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="4952" class="pd pe gu pa b bg pf pg l ph pi">def answering_agent(state: AgentState) -&gt; AgentState:<br/>    # answer the query<br/>    prompt = f&quot;&quot;&quot;<br/>You are an answering agent. You will be given a list of document nodes that were automatically retrieved by the system. These nodes are to answer the query:<br/>```{state[&#x27;query&#x27;]}```<br/><br/>Give references to sections/paragraphs if possible, but do not output full node ids with backticks and the hash. <br/>&quot;&quot;&quot;</span></pre><p id="6995" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk"><strong class="mz gv">Variations of the Answers retrieved through the Multi-Graph Multi-Agent system</strong></p><p id="4001" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Answer #2:</p><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="3006" class="pd pe gu pa b bg pf pg l ph pi">To manage control functions effectively, both the Board and the Chief <br/>Compliance Officer (CCO) must collaborate and establish a structured <br/>framework. Key measures include:<br/><br/><strong class="pa gv">Board’s Responsibilities:</strong><br/>- The Board must approve the appointment, remuneration, and termination of the<br/>CCO, ensuring they have the necessary stature to engage effectively with<br/>senior management <strong class="pa gv">(S 6.3(a), (b))</strong>.<br/>- The Board should engage regularly with the CCO to discuss compliance issues<br/>and ensure the CCO has direct access to the Board <strong class="pa gv">(S 6.3(c), (d))</strong>.<br/>- The Board must also assure that the CCO is granted adequate resources and<br/>support, including competent officers, to fulfill their duties <strong class="pa gv">(S 6.3(e))</strong>.<br/><br/><strong class="pa gv">CCO’s Role and Independence:</strong><br/>- The CCO should oversee the institution-wide compliance risk management and <br/>ensure that responsibilities are clearly documented and communicated in the <br/>compliance policy <strong class="pa gv">(S 7.2(a), (b))</strong>.<br/>- If the CCO is involved in other control functions, they must ensure their <br/>independence and ability to focus on compliance responsibilities remain <br/>uncompromised <strong class="pa gv">(S 7.3)</strong>.<br/><br/><strong class="pa gv">Coordination with Other Functions:</strong><br/>- Proper coordination between the CCO and other control functions is essential.<br/>This includes robust information flows and mechanisms for seeking compliance<br/>advice <strong class="pa gv">(S 7.2(d))</strong>.<br/>- The Board must approve the sharing of compliance responsibilities to ensure<br/>there is no dilution of focus or effectiveness <strong class="pa gv">(S 7.4(a))</strong>.<br/><br/><strong class="pa gv">Separation from Internal Audit:</strong><br/>- Compliance functions should remain distinct from the internal audit to <br/>maintain the efficacy of independent reviews <strong class="pa gv">(S 7.4(b), S 9.1)</strong>.<br/><br/><strong class="pa gv">Training and Capacity Building:</strong><br/>- The compliance function is responsible for training and providing guidance<br/>to other officers on legal and regulatory requirements to manage compliance <br/>risk effectively <strong class="pa gv">(S 8.11)</strong>.<br/><br/>By implementing these steps, the Board and the CCO can effectively manage<br/>control functions, maintaining robust compliance and governance frameworks.</span></pre><p id="7a76" class="pw-post-body-paragraph mx my gu mz b na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu gn bk">Answer #3:</p><pre class="of og oh oi oj oz pa pb bp pc bb bk"><span id="e24a" class="pd pe gu pa b bg pf pg l ph pi">The management of control functions by the Board and the Chief Compliance <br/>Officer (CCO) involves several key responsibilities and structures:<br/><br/><strong class="pa gv">Role of the Board in Managing CCO Functions:</strong><br/>- The board must approve the appointment, remuneration, and termination of the<br/>CCO <strong class="pa gv">(Section 6.3(a))</strong>.<br/>- The board should ensure that the CCO has sufficient stature to interact <br/>effectively with the CEO and senior management <strong class="pa gv">(Section 6.3(b))</strong>.<br/>- Regular engagement between the board and the CCO is important to discuss <br/>compliance issues directly <strong class="pa gv">(Section 6.3(c))</strong>.<br/>- The CCO must have direct, unimpeded access to the board <strong class="pa gv">(Section 6.3(d))</strong>.<br/>- There must be adequate resources and support for the CCO to perform his<br/>duties effectively <strong class="pa gv">(Section 6.3(e))</strong>.<br/><br/><strong class="pa gv">Shared Responsibilities and Independence:</strong><br/>- Where compliance functions are shared, the board must approve this <br/>arrangement, and responsibilities should be clearly defined and documented<br/>in the compliance policy <strong class="pa gv">(Section 7.2)</strong>.<br/>- The CCO should not assume responsibilities for internal audit, as this can<br/>compromise independent review processes <strong class="pa gv">(Sections 7.4, 9.1)</strong>.<br/>- The CCO must ensure that their independence and ability to focus on<br/>compliance are not impaired by additional responsibilities <strong class="pa gv">(Section 7.3)</strong>.<br/><br/><strong class="pa gv">Responsibilities Within the Organization:</strong><br/>- Compliance is the responsibility of all officers within the institution. <br/>Business lines manage compliance risk through their managerial controls, <br/>while the compliance function ensures that these controls are adequate <br/><strong class="pa gv">(Section 1.2)</strong>.<br/>- The internal audit function provides independent assurance on the quality <br/>and effectiveness of the institution’s controls, including those concerning<br/>compliance <strong class="pa gv">(Section 1.2(c))</strong>.<br/><br/><strong class="pa gv">Coordination Across Control Functions:</strong><br/>- Arrangements for coordination among control functions and the CCO must <br/>promote a consistent approach to managing compliance risk, with adequate <br/>information flows and avenues for advice <strong class="pa gv">(Section 7.2(d))</strong>.<br/><br/>By following these guidelines, the Board and the CCO can manage the<br/>compliance control functions effectively, ensuring that compliance risks<br/>are appropriately identified, managed, and mitigated across the organization.</span></pre></div></div></div></div></section></div></div></article></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ro rp ab ja"><div class="rq ab"><a class="rr ay am ao" rel="noopener follow" href="/tag/rag?source=post_page-----c90e073e0052--------------------------------"><div class="rs fj cx rt ge ru rv bf b bg z bk rw">Rag</div></a></div><div class="rq ab"><a class="rr ay am ao" rel="noopener follow" href="/tag/llm?source=post_page-----c90e073e0052--------------------------------"><div class="rs fj cx rt ge ru rv bf b bg z bk rw">Llm</div></a></div><div class="rq ab"><a class="rr ay am ao" rel="noopener follow" href="/tag/knolwedge-graph?source=post_page-----c90e073e0052--------------------------------"><div class="rs fj cx rt ge ru rv bf b bg z bk rw">Knolwedge Graph</div></a></div><div class="rq ab"><a class="rr ay am ao" rel="noopener follow" href="/tag/graph-rag?source=post_page-----c90e073e0052--------------------------------"><div class="rs fj cx rt ge ru rv bf b bg z bk rw">Graph Rag</div></a></div></div></div></div><div class="l"></div><footer class="rx rh ry rz sa ab q sb ik c"><div class="l ae"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab cp sc"><div class="ab q kv"><div class="sd l"><span class="l se sf sg e d"><div class="ab q kv kw"><div class="pw-multi-vote-icon fj je kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fenterprise-rag%2Fc90e073e0052&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;user=Chia+Jeng+Yang&amp;userId=6975d2c42b25&amp;source=---footer_actions--c90e073e0052---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="la ao lb lc ld le am lf lg lh kz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><p class="bf b dv z du"><span class="lp">--</span></p></div></div></span><span class="l h g f sh si"><div class="ab q kv kw"><div class="pw-multi-vote-icon fj je kx ky kz"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fenterprise-rag%2Fc90e073e0052&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;user=Chia+Jeng+Yang&amp;userId=6975d2c42b25&amp;source=---footer_actions--c90e073e0052---------------------clap_footer-----------"><div><div class="bm" aria-hidden="false"><div class="la ao lb lc ld le am lf lg lh kz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM13.916 3.953l1.523-2.112-1.184-.39zM8.589 1.84l1.522 2.112-.337-2.501zM18.523 18.92c-.86.86-1.75 1.246-2.62 1.33a6 6 0 0 0 .407-.372c2.388-2.389 2.86-4.951 1.399-7.623l-.912-1.603-.79-1.672c-.26-.56-.194-.98.203-1.288a.7.7 0 0 1 .546-.132c.283.046.546.231.728.5l2.363 4.157c.976 1.624 1.141 4.237-1.324 6.702m-10.999-.438L3.37 14.328a.828.828 0 0 1 .585-1.408.83.83 0 0 1 .585.242l2.158 2.157a.365.365 0 0 0 .516-.516l-2.157-2.158-1.449-1.449a.826.826 0 0 1 1.167-1.17l3.438 3.44a.363.363 0 0 0 .516 0 .364.364 0 0 0 0-.516L5.293 9.513l-.97-.97a.826.826 0 0 1 0-1.166.84.84 0 0 1 1.167 0l.97.968 3.437 3.436a.36.36 0 0 0 .517 0 .366.366 0 0 0 0-.516L6.977 7.83a.82.82 0 0 1-.241-.584.82.82 0 0 1 .824-.826c.219 0 .43.087.584.242l5.787 5.787a.366.366 0 0 0 .587-.415l-1.117-2.363c-.26-.56-.194-.98.204-1.289a.7.7 0 0 1 .546-.132c.283.046.545.232.727.501l2.193 3.86c1.302 2.38.883 4.59-1.277 6.75-1.156 1.156-2.602 1.627-4.19 1.367-1.418-.236-2.866-1.033-4.079-2.246M10.75 5.971l2.12 2.12c-.41.502-.465 1.17-.128 1.89l.22.465-3.523-3.523a.8.8 0 0 1-.097-.368c0-.22.086-.428.241-.584a.847.847 0 0 1 1.167 0m7.355 1.705c-.31-.461-.746-.758-1.23-.837a1.44 1.44 0 0 0-1.11.275c-.312.24-.505.543-.59.881a1.74 1.74 0 0 0-.906-.465 1.47 1.47 0 0 0-.82.106l-2.182-2.182a1.56 1.56 0 0 0-2.2 0 1.54 1.54 0 0 0-.396.701 1.56 1.56 0 0 0-2.21-.01 1.55 1.55 0 0 0-.416.753c-.624-.624-1.649-.624-2.237-.037a1.557 1.557 0 0 0 0 2.2c-.239.1-.501.238-.715.453a1.56 1.56 0 0 0 0 2.2l.516.515a1.556 1.556 0 0 0-.753 2.615L7.01 19c1.32 1.319 2.909 2.189 4.475 2.449q.482.08.971.08c.85 0 1.653-.198 2.393-.579.231.033.46.054.686.054 1.266 0 2.457-.52 3.505-1.567 2.763-2.763 2.552-5.734 1.439-7.586z" clip-rule="evenodd"></path></svg></div></div></div></a></span></div><div class="pw-multi-vote-count l li lj lk ll lm ln lo"><p class="bf b dv z du"><span class="lp">--</span></p></div></div></span></div><div class="bq ab"><div><div class="bm" aria-hidden="false"><button class="ao la ls lt ab q fk lu lv" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="lr"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"></path></svg><p class="bf b bg z du"><span class="pw-responses-count lq lr">2</span></p></button></div></div></div></div><div class="ab q"><div class="rn l ix"><div><div class="bm" aria-hidden="false"><span><a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2Fc90e073e0052&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fenterprise-rag%2Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052&amp;source=---footer_actions--c90e073e0052---------------------bookmark_footer-----------"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="none" viewBox="0 0 25 25" class="du lx" aria-label="Add to list bookmark button"><path fill="currentColor" d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .805.396L12.5 17l5.695 4.396A.5.5 0 0 0 19 21v-8.5a.5.5 0 0 0-1 0v7.485l-5.195-4.012a.5.5 0 0 0-.61 0L7 19.985z"></path></svg></a></span></div></div></div><div class="rn l ix"><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fk ah ai aj ak al mf an ao ap ex mg mh lv mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"></path></svg></button></div></div></div></div></div></div></div></div></div></footer><div class="sj sk sl sm sn l"><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="so bh r sp"></div><div class="sq l"><div class="ab sr ss st iz iy"><div class="su sv sw sx sy sz ta tb tc td ab cp"><div class="h k"><a href="https://medium.com/enterprise-rag?source=post_page---post_publication_info--c90e073e0052--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="WhyHow.AI" class="te ib ic cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*pgVFKfshcigm3MgBLdwN-A.png" width="48" height="48" loading="lazy"/><div class="te l ic ib fs n fr tf"></div></div></a></div><div class="j i d"><a href="https://medium.com/enterprise-rag?source=post_page---post_publication_info--c90e073e0052--------------------------------" rel="noopener follow"><div class="fj ab"><img alt="WhyHow.AI" class="te th tg cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*pgVFKfshcigm3MgBLdwN-A.png" width="64" height="64" loading="lazy"/><div class="te l tg th fs n fr tf"></div></div></a></div><div class="j i d ti ix"><div class="ab"></div></div></div><div class="ab co tj"><div class="tk tl tm ny nx l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" href="https://medium.com/enterprise-rag?source=post_page---post_publication_info--c90e073e0052--------------------------------" rel="noopener follow"><h2 class="pw-author-name bf to tp tq tr ts tt tu ni qr qs nm qu qv nq qx qy bk"><span class="gn tn">Published in <!-- -->WhyHow.AI</span></h2></a><div class="rq ab ia"><div class="l ix"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/enterprise-rag/followers?source=post_page---post_publication_info--c90e073e0052--------------------------------">992 Followers</a></span></div><div class="bf b bg z du ab jd"><span class="ir l" aria-hidden="true"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/enterprise-rag/python-based-reasoning-engine-for-deterministic-ai-25722f9047e8?source=post_page---post_publication_info--c90e073e0052--------------------------------">Last published <!-- -->6 days ago</a></div></div><div class="tv l"><p class="bf b bg z bk"><a class="af ag ah ai aj ak al am an ao ap aq ar nv go" href="http://WhyHow.AI" rel="noopener  ugc nofollow">WhyHow.AI</a>’s platform helps devs and non-technical domain experts build Agentic and RAG-native knowledge graphs</p></div></div></div><div class="h k"><div class="ab"></div></div></div></div><div class="ab sr ss st iz iy"><div class="su sv sw sx sy sz ta tb tc td ab cp"><div class="h k"><a tabindex="0" rel="noopener follow" href="/@chiajy?source=post_page---post_author_info--c90e073e0052--------------------------------"><div class="l fj"><img alt="Chia Jeng Yang" class="l fd by ic ib cx" src="https://miro.medium.com/v2/resize:fill:96:96/1*93LozG419VJY8XaqrTstnw.jpeg" width="48" height="48" loading="lazy"/><div class="fr by l ic ib fs n ay tf"></div></div></a></div><div class="j i d"><a tabindex="0" rel="noopener follow" href="/@chiajy?source=post_page---post_author_info--c90e073e0052--------------------------------"><div class="l fj"><img alt="Chia Jeng Yang" class="l fd by tg th cx" src="https://miro.medium.com/v2/resize:fill:128:128/1*93LozG419VJY8XaqrTstnw.jpeg" width="64" height="64" loading="lazy"/><div class="fr by l tg th fs n ay tf"></div></div></a></div><div class="j i d ti ix"><div class="ab"><span><button class="bf b bg z tw rs tx ty tz ua ub ev ew uc ud ue fa fb fc fd bm fe ff">Follow</button></span></div></div></div><div class="ab co tj"><div class="tk tl tm ny nx l"><a class="af ag ah aj ak al am an ao ap aq ar as at ab q" rel="noopener follow" href="/@chiajy?source=post_page---post_author_info--c90e073e0052--------------------------------"><h2 class="pw-author-name bf to tp tq tr ts tt tu ni qr qs nm qu qv nq qx qy bk"><span class="gn tn">Written by <!-- -->Chia Jeng Yang</span></h2></a><div class="rq ab ia"><div class="l ix"><span class="pw-follower-count bf b bg z du"><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/@chiajy/followers?source=post_page---post_author_info--c90e073e0052--------------------------------">3.9K Followers</a></span></div><div class="bf b bg z du ab jd"><span class="ir l" aria-hidden="true"><span class="bf b bg z du">·</span></span><a class="af ag ah ai aj ak al am an ao ap aq ar iq" rel="noopener follow" href="/@chiajy/following?source=post_page---post_author_info--c90e073e0052--------------------------------">226 Following</a></div></div><div class="tv l"><p class="bf b bg z bk">Co-Founder of <a class="af ag ah ai aj ak al am an ao ap aq ar nv go" href="http://WhyHow.AI" rel="noopener  ugc nofollow">WhyHow.AI</a></p></div></div></div><div class="h k"><div class="ab"><span><button class="bf b bg z tw rs tx ty tz ua ub ev ew uc ud ue fa fb fc fd bm fe ff">Follow</button></span></div></div></div></div></div></div><div class="uf ug uh ui uj l"><div class="so bh r uf ug uk ul um"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="ab q cp"><h2 class="bf to pl pn po pp pr ps pt pv pw px pz qa qb qd qe bk">Responses (<!-- -->2<!-- -->)</h2><div class="ab un"><div><div class="bm" aria-hidden="false"><a class="uo up" href="https://policy.medium.com/medium-rules-30e5502c4eb4?source=post_page---post_responses--c90e073e0052--------------------------------" rel="noopener follow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25"><path fill-rule="evenodd" d="M11.987 5.036a.754.754 0 0 1 .914-.01c.972.721 1.767 1.218 2.6 1.543.828.322 1.719.485 2.887.505a.755.755 0 0 1 .741.757c-.018 3.623-.43 6.256-1.449 8.21-1.034 1.984-2.662 3.209-4.966 4.083a.75.75 0 0 1-.537-.003c-2.243-.874-3.858-2.095-4.897-4.074-1.024-1.951-1.457-4.583-1.476-8.216a.755.755 0 0 1 .741-.757c1.195-.02 2.1-.182 2.923-.503.827-.322 1.6-.815 2.519-1.535m.468.903c-.897.69-1.717 1.21-2.623 1.564-.898.35-1.856.527-3.026.565.037 3.45.469 5.817 1.36 7.515.884 1.684 2.25 2.762 4.284 3.571 2.092-.81 3.465-1.89 4.344-3.575.886-1.698 1.299-4.065 1.334-7.512-1.149-.039-2.091-.217-2.99-.567-.906-.353-1.745-.873-2.683-1.561m-.009 9.155a2.672 2.672 0 1 0 0-5.344 2.672 2.672 0 0 0 0 5.344m0 1a3.672 3.672 0 1 0 0-7.344 3.672 3.672 0 0 0 0 7.344m-1.813-3.777.525-.526.916.917 1.623-1.625.526.526-2.149 2.152z" clip-rule="evenodd"></path></svg></a></div></div></div></div><div class="rg l"><button class="bf b bg z bk rs uq ur us lx lu ub ev ew ex ut uu uv fa uw ux uy uz va fb fc fd bm fe ff">See all responses</button></div></div></div></div><div class="vb vc vd ve vf l bx"><div class="h k j"><div class="so bh vg vh"></div><div class="ab cb"><div class="ci bh fz ga gb gc"><div class="vi ab kv ja"><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b dv z du">Help</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b dv z du">Status</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/about?autoplay=1&amp;source=post_page-----c90e073e0052--------------------------------"><p class="bf b dv z du">About</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----c90e073e0052--------------------------------"><p class="bf b dv z du">Careers</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="pressinquiries@medium.com?source=post_page-----c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b dv z du">Press</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b dv z du">Blog</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b dv z du">Privacy</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b dv z du">Terms</p></a></div><div class="vj vk l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----c90e073e0052--------------------------------" rel="noopener follow"><p class="bf b dv z du">Text to speech</p></a></div><div class="vj l"><a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/business?source=post_page-----c90e073e0052--------------------------------"><p class="bf b dv z du">Teams</p></a></div></div></div></div></div></div></div></div></div></div><script>window.__BUILD_ID__="main-20241206-174141-0dcad12dd4"</script><script>window.__GRAPHQL_URI__ = "https://medium.com/_/graphql"</script><script>window.__PRELOADED_STATE__ = {"algolia":{"queries":{}},"cache":{"experimentGroupSet":true,"reason":"","group":"enabled","tags":["group-edgeCachePosts","post-c90e073e0052","user-6975d2c42b25","collection-75cb6ccf039f"],"serverVariantState":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","middlewareEnabled":true,"cacheStatus":"DYNAMIC","shouldUseCache":true,"vary":[],"lohpSummerUpsellEnabled":false,"postBottomResponsesEnabled":false},"client":{"hydrated":false,"isUs":false,"isNativeMedium":false,"isSafariMobile":false,"isSafari":false,"isFirefox":false,"routingEntity":{"type":"DEFAULT","explicit":false},"viewerIsBot":false},"debug":{"requestId":"283c6baf-55f3-46b1-a8d1-1b0812d8d15a","hybridDevServices":[],"originalSpanCarrier":{"traceparent":"00-c2c89c98e593d5afcbae78738ddf0a99-a272d8525b9f24fe-01"}},"multiVote":{"clapsPerPost":{}},"navigation":{"branch":{"show":null,"hasRendered":null,"blockedByCTA":false},"hideGoogleOneTap":false,"hasRenderedAlternateUserBanner":null,"currentLocation":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052","host":"medium.com","hostname":"medium.com","referrer":"","hasSetReferrer":false,"susiModal":{"step":null,"operation":"register"},"postRead":false,"partnerProgram":{"selectedCountryCode":null},"queryString":"","currentHash":""},"config":{"nodeEnv":"production","version":"main-20241206-174141-0dcad12dd4","target":"production","productName":"Medium","publicUrl":"https:\u002F\u002Fcdn-client.medium.com\u002Flite","authDomain":"medium.com","authGoogleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","favicon":"production","glyphUrl":"https:\u002F\u002Fglyph.medium.com","branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","algolia":{"appId":"MQ57UUUQZ2","apiKeySearch":"394474ced050e3911ae2249ecc774921","indexPrefix":"medium_","host":"-dsn.algolia.net"},"recaptchaKey":"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk","recaptcha3Key":"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5","recaptchaEnterpriseKeyId":"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp","datadog":{"applicationId":"6702d87d-a7e0-42fe-bbcb-95b469547ea0","clientToken":"pub853ea8d17ad6821d9f8f11861d23dfed","rumToken":"pubf9cc52896502b9413b68ba36fc0c7162","context":{"deployment":{"target":"production","tag":"main-20241206-174141-0dcad12dd4","commit":"0dcad12dd41ec58c2efa67b913ed421694a63d1b"}},"datacenter":"us"},"googleAnalyticsCode":"G-7JY7T788PK","googlePay":{"apiVersion":"2","apiVersionMinor":"0","merchantId":"BCR2DN6TV7EMTGBM","merchantName":"Medium","instanceMerchantId":"13685562959212738550"},"applePay":{"version":3},"signInWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"mediumMastodonDomainName":"me.dm","mediumOwnedAndOperatedCollectionIds":["8a9336e5bb4","b7e45b22fec3","193b68bd4fba","8d6b8a439e32","54c98c43354d","3f6ecf56618","d944778ce714","92d2092dc598","ae2a65f35510","1285ba81cada","544c7006046e","fc8964313712","40187e704f1c","88d9857e584e","7b6769f2748b","bcc38c8f6edf","cef6983b292","cb8577c9149e","444d13b52878","713d7dbc99b0","ef8e90590e66","191186aaafa0","55760f21cdc5","9dc80918cc93","bdc4052bbdba","8ccfed20cbb2"],"tierOneDomains":["medium.com","thebolditalic.com","arcdigital.media","towardsdatascience.com","uxdesign.cc","codeburst.io","psiloveyou.xyz","writingcooperative.com","entrepreneurshandbook.co","prototypr.io","betterhumans.coach.me","theascent.pub"],"topicsToFollow":["d61cf867d93f","8a146bc21b28","1eca0103fff3","4d562ee63426","aef1078a3ef5","e15e46793f8d","6158eb913466","55f1c20aba7a","3d18b94f6858","4861fee224fd","63c6f1f93ee","1d98b3a9a871","decb52b64abf","ae5d4995e225","830cded25262"],"topicToTagMappings":{"accessibility":"accessibility","addiction":"addiction","android-development":"android-development","art":"art","artificial-intelligence":"artificial-intelligence","astrology":"astrology","basic-income":"basic-income","beauty":"beauty","biotech":"biotech","blockchain":"blockchain","books":"books","business":"business","cannabis":"cannabis","cities":"cities","climate-change":"climate-change","comics":"comics","coronavirus":"coronavirus","creativity":"creativity","cryptocurrency":"cryptocurrency","culture":"culture","cybersecurity":"cybersecurity","data-science":"data-science","design":"design","digital-life":"digital-life","disability":"disability","economy":"economy","education":"education","equality":"equality","family":"family","feminism":"feminism","fiction":"fiction","film":"film","fitness":"fitness","food":"food","freelancing":"freelancing","future":"future","gadgets":"gadgets","gaming":"gaming","gun-control":"gun-control","health":"health","history":"history","humor":"humor","immigration":"immigration","ios-development":"ios-development","javascript":"javascript","justice":"justice","language":"language","leadership":"leadership","lgbtqia":"lgbtqia","lifestyle":"lifestyle","machine-learning":"machine-learning","makers":"makers","marketing":"marketing","math":"math","media":"media","mental-health":"mental-health","mindfulness":"mindfulness","money":"money","music":"music","neuroscience":"neuroscience","nonfiction":"nonfiction","outdoors":"outdoors","parenting":"parenting","pets":"pets","philosophy":"philosophy","photography":"photography","podcasts":"podcast","poetry":"poetry","politics":"politics","privacy":"privacy","product-management":"product-management","productivity":"productivity","programming":"programming","psychedelics":"psychedelics","psychology":"psychology","race":"race","relationships":"relationships","religion":"religion","remote-work":"remote-work","san-francisco":"san-francisco","science":"science","self":"self","self-driving-cars":"self-driving-cars","sexuality":"sexuality","social-media":"social-media","society":"society","software-engineering":"software-engineering","space":"space","spirituality":"spirituality","sports":"sports","startups":"startup","style":"style","technology":"technology","transportation":"transportation","travel":"travel","true-crime":"true-crime","tv":"tv","ux":"ux","venture-capital":"venture-capital","visual-design":"visual-design","work":"work","world":"world","writing":"writing"},"defaultImages":{"avatar":{"imageId":"1*dmbNkD5D-u45r44go_cf0g.png","height":150,"width":150},"orgLogo":{"imageId":"7*V1_7XP4snlmqrc_0Njontw.png","height":110,"width":500},"postLogo":{"imageId":"bd978bb536350a710e8efb012513429cabdc4c28700604261aeda246d0f980b7","height":810,"width":1440},"postPreviewImage":{"imageId":"1*hn4v1tCaJy7cWMyb0bpNpQ.png","height":386,"width":579}},"collectionStructuredData":{"8d6b8a439e32":{"name":"Elemental","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F980\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png","width":980,"height":159}}},"3f6ecf56618":{"name":"Forge","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F596\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png","width":596,"height":183}}},"ae2a65f35510":{"name":"GEN","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F264\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png","width":264,"height":140}}},"88d9857e584e":{"name":"LEVEL","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png","width":540,"height":108}}},"7b6769f2748b":{"name":"Marker","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F383\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png","width":383,"height":92}}},"444d13b52878":{"name":"OneZero","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*cw32fIqCbRWzwJaoQw6BUg.png","width":540,"height":123}}},"8ccfed20cbb2":{"name":"Zora","data":{"@type":"NewsMediaOrganization","ethicsPolicy":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Farticles\u002F360043290473","logo":{"@type":"ImageObject","url":"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F540\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png","width":540,"height":106}}}},"embeddedPostIds":{"coronavirus":"cd3010f9d81f"},"sharedCdcMessaging":{"COVID_APPLICABLE_TAG_SLUGS":[],"COVID_APPLICABLE_TOPIC_NAMES":[],"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE":[],"COVID_MESSAGES":{"tierA":{"text":"For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":66,"end":73,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"tierB":{"text":"Anyone can publish on Medium per our Policies, but we don’t fact-check every story. For more info about the coronavirus, see cdc.gov.","markups":[{"start":37,"end":45,"href":"https:\u002F\u002Fhelp.medium.com\u002Fhc\u002Fen-us\u002Fcategories\u002F201931128-Policies-Safety"},{"start":125,"end":132,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"paywall":{"text":"This article has been made free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":56,"end":70,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":138,"end":145,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]},"unbound":{"text":"This article is free for everyone, thanks to Medium Members. For more information on the novel coronavirus and Covid-19, visit cdc.gov.","markups":[{"start":45,"end":59,"href":"https:\u002F\u002Fmedium.com\u002Fmembership"},{"start":127,"end":134,"href":"https:\u002F\u002Fwww.cdc.gov\u002Fcoronavirus\u002F2019-nCoV"}]}},"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST":["3b31a67bff4a"]},"sharedVoteMessaging":{"TAGS":["politics","election-2020","government","us-politics","election","2020-presidential-race","trump","donald-trump","democrats","republicans","congress","republican-party","democratic-party","biden","joe-biden","maga"],"TOPICS":["politics","election"],"MESSAGE":{"text":"Find out more about the U.S. election results here.","markups":[{"start":46,"end":50,"href":"https:\u002F\u002Fcookpolitical.com\u002F2020-national-popular-vote-tracker"}]},"EXCLUDE_POSTS":["397ef29e3ca5"]},"embedPostRules":[],"recircOptions":{"v1":{"limit":3},"v2":{"limit":8}},"braintreeClientKey":"production_zjkj96jm_m56f8fqpf7ngnrd4","braintree":{"enabled":true,"merchantId":"m56f8fqpf7ngnrd4","merchantAccountId":{"usd":"AMediumCorporation_instant","eur":"amediumcorporation_EUR","cad":"amediumcorporation_CAD"},"publicKey":"ds2nn34bg2z7j5gd","braintreeEnvironment":"production","dashboardUrl":"https:\u002F\u002Fwww.braintreegateway.com\u002Fmerchants","gracePeriodDurationInDays":14,"mediumMembershipPlanId":{"monthly":"ce105f8c57a3","monthlyV2":"e8a5e126-792b-4ee6-8fba-d574c1b02fc5","monthlyWithTrial":"d5ee3dbe3db8","monthlyPremium":"fa741a9b47a2","yearly":"a40ad4a43185","yearlyV2":"3815d7d6-b8ca-4224-9b8c-182f9047866e","yearlyStaff":"d74fb811198a","yearlyWithTrial":"b3bc7350e5c7","yearlyPremium":"e21bd2c12166","monthlyOneYearFree":"e6c0637a-2bad-4171-ab4f-3c268633d83c","monthly25PercentOffFirstYear":"235ecc62-0cdb-49ae-9378-726cd21c504b","monthly20PercentOffFirstYear":"ba518864-9c13-4a99-91ca-411bf0cac756","monthly15PercentOffFirstYear":"594c029b-9f89-43d5-88f8-8173af4e070e","monthly10PercentOffFirstYear":"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0","monthlyForStudents":"629ebe51-da7d-41fd-8293-34cd2f2030a8","yearlyOneYearFree":"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1","yearly25PercentOffFirstYear":"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34","yearly20PercentOffFirstYear":"47565488-435b-47f8-bf93-40d5fbe0ebc8","yearly15PercentOffFirstYear":"8259809b-0881-47d9-acf7-6c001c7f720f","yearly10PercentOffFirstYear":"9dd694fb-96e1-472c-8d9e-3c868d5c1506","yearlyForStudents":"e29345ef-ab1c-4234-95c5-70e50fe6bc23","monthlyCad":"p52orjkaceei","yearlyCad":"h4q9g2up9ktt"},"braintreeDiscountId":{"oneMonthFree":"MONTHS_FREE_01","threeMonthsFree":"MONTHS_FREE_03","sixMonthsFree":"MONTHS_FREE_06","fiftyPercentOffOneYear":"FIFTY_PERCENT_OFF_ONE_YEAR"},"3DSecureVersion":"2","defaultCurrency":"usd","providerPlanIdCurrency":{"4ycw":"usd","rz3b":"usd","3kqm":"usd","jzw6":"usd","c2q2":"usd","nnsw":"usd","q8qw":"usd","d9y6":"usd","fx7w":"cad","nwf2":"cad"}},"paypalClientId":"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v","paypal":{"host":"https:\u002F\u002Fapi.paypal.com:443","clientMode":"production","serverMode":"live","webhookId":"4G466076A0294510S","monthlyPlan":{"planId":"P-9WR0658853113943TMU5FDQA","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlan":{"planId":"P-7N8963881P8875835MU5JOPQ","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com\u002Fredeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"},"oldMonthlyPlan":{"planId":"P-96U02458LM656772MJZUVH2Y","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlan":{"planId":"P-59P80963JF186412JJZU3SMI","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"monthlyPlanWithTrial":{"planId":"P-66C21969LR178604GJPVKUKY","name":"Medium Membership (Monthly) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"yearlyPlanWithTrial":{"planId":"P-6XW32684EX226940VKCT2MFA","name":"Medium Membership (Annual) with setup fee","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"oldMonthlyPlanNoSetupFee":{"planId":"P-4N046520HR188054PCJC7LJI","name":"Medium Membership (Monthly)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed monthly."},"oldYearlyPlanNoSetupFee":{"planId":"P-7A4913502Y5181304CJEJMXQ","name":"Medium Membership (Annual)","description":"Unlimited access to the best and brightest stories on Medium. Membership billed annually."},"sdkUrl":"https:\u002F\u002Fwww.paypal.com\u002Fsdk\u002Fjs"},"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","log":{"json":true,"level":"info"},"imageUploadMaxSizeMb":25,"staffPicks":{"title":"Staff Picks","catalogId":"c7bc6e1ee00f"}},"session":{"xsrf":""}}</script><script>window.__APOLLO_STATE__ = {"ROOT_QUERY":{"__typename":"Query","viewer":null,"collectionByDomainOrSlug({\"domainOrSlug\":\"enterprise-rag\"})":{"__ref":"Collection:75cb6ccf039f"},"postResult({\"id\":\"c90e073e0052\"})":{"__ref":"Post:c90e073e0052"}},"Collection:75cb6ccf039f":{"__typename":"Collection","id":"75cb6ccf039f","customStyleSheet":null,"colorPalette":{"__typename":"ColorPalette","highlightSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FFFFFFFF","point":0},{"__typename":"ColorPoint","color":"#FFE8F3E8","point":0.1},{"__typename":"ColorPoint","color":"#FFE8F3E8","point":0.2},{"__typename":"ColorPoint","color":"#FFD1E7D1","point":0.6},{"__typename":"ColorPoint","color":"#FFA3D0A2","point":1}]},"defaultBackgroundSpectrum":{"__typename":"ColorSpectrum","backgroundColor":"#FFFFFFFF","colorPoints":[{"__typename":"ColorPoint","color":"#FF1A8917","point":0},{"__typename":"ColorPoint","color":"#FF11800E","point":0.1},{"__typename":"ColorPoint","color":"#FF0F730C","point":0.2},{"__typename":"ColorPoint","color":"#FF095407","point":1}]},"tintBackgroundSpectrum":null},"favicon":{"__ref":"ImageMetadata:"},"domain":null,"slug":"enterprise-rag","googleAnalyticsId":null,"name":"WhyHow.AI","subscriberCount":992,"description":"WhyHow.AI’s platform helps devs and non-technical domain experts build Agentic and RAG-native knowledge graphs","avatar":{"__ref":"ImageMetadata:1*pgVFKfshcigm3MgBLdwN-A.png"},"latestPostsConnection({\"paging\":{\"limit\":1}})":{"__typename":"PostConnection","posts":[{"__ref":"Post:25722f9047e8"}]},"viewerEdge":{"__ref":"CollectionViewerEdge:collectionId:75cb6ccf039f-viewerId:lo_35d2fe133f15"},"twitterUsername":null,"facebookPageId":null,"logo":{"__ref":"ImageMetadata:"}},"ImageMetadata:":{"__typename":"ImageMetadata","id":"","originalWidth":0,"originalHeight":0},"ImageMetadata:1*pgVFKfshcigm3MgBLdwN-A.png":{"__typename":"ImageMetadata","id":"1*pgVFKfshcigm3MgBLdwN-A.png"},"User:6975d2c42b25":{"__typename":"User","id":"6975d2c42b25","customDomainState":{"__typename":"CustomDomainState","live":{"__typename":"CustomDomain","domain":"chiajy.medium.com"}},"hasSubdomain":true,"username":"chiajy","linkedAccounts":{"__ref":"LinkedAccounts:6975d2c42b25"},"isSuspended":false,"name":"Chia Jeng Yang","imageId":"1*93LozG419VJY8XaqrTstnw.jpeg","verifications":{"__typename":"VerifiedInfo","isBookAuthor":false},"socialStats":{"__typename":"SocialStats","followerCount":3922,"followingCount":188,"collectionFollowingCount":38},"bio":"Co-Founder of WhyHow.AI","membership":{"__ref":"Membership:fa16dcd0-9ce5-43d0-9534-2b64906be293"},"allowNotes":true,"viewerEdge":{"__ref":"UserViewerEdge:userId:6975d2c42b25-viewerId:lo_35d2fe133f15"},"twitterScreenName":"chiajy2000"},"Post:25722f9047e8":{"__typename":"Post","id":"25722f9047e8","firstPublishedAt":1733088705707,"creator":{"__ref":"User:6975d2c42b25"},"collection":{"__ref":"Collection:75cb6ccf039f"},"isSeries":false,"mediumUrl":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fpython-based-reasoning-engine-for-deterministic-ai-25722f9047e8","sequence":null,"uniqueSlug":"python-based-reasoning-engine-for-deterministic-ai-25722f9047e8"},"LinkedAccounts:6975d2c42b25":{"__typename":"LinkedAccounts","mastodon":null,"id":"6975d2c42b25"},"Membership:fa16dcd0-9ce5-43d0-9534-2b64906be293":{"__typename":"Membership","tier":"MEMBER","id":"fa16dcd0-9ce5-43d0-9534-2b64906be293"},"Paragraph:4cb09146a12a_0":{"__typename":"Paragraph","id":"4cb09146a12a_0","name":"fcc9","type":"H3","href":null,"layout":null,"metadata":null,"text":"Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_1":{"__typename":"Paragraph","id":"4cb09146a12a_1","name":"a9fd","type":"P","href":null,"layout":null,"metadata":null,"text":"Authored by: Timothy Chung, Chia Jeng Yang","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_2":{"__typename":"Paragraph","id":"4cb09146a12a_2","name":"d200","type":"P","href":null,"layout":null,"metadata":null,"text":"Update: We have recently open-sourced our KG Studio here: https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fopen-sourcing-the-whyhow-knowledge-graph-studio-powered-by-nosql-edce283fb341","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":58,"end":169,"href":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fopen-sourcing-the-whyhow-knowledge-graph-studio-powered-by-nosql-edce283fb341","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":0,"end":169,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_3":{"__typename":"Paragraph","id":"4cb09146a12a_3","name":"6e9d","type":"P","href":null,"layout":null,"metadata":null,"text":"In this article and open source repository, we wanted to demonstrate intelligent navigation of a legal document’s clauses done through a multi-agent system that leverages a lexical graph (document hierarchy) and chunk linking within a multi-graph multi-agent workflow for a regulatory document. The stack we used here was Reducto.AI, WhyHow.AI, Langgraph, LlamaIndex. You can find access to the open source repository here.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":322,"end":332,"href":"http:\u002F\u002Freducto.ai","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":334,"end":343,"href":"http:\u002F\u002Fwhyhow.ai","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":345,"end":354,"href":"https:\u002F\u002Flangchain-ai.github.io\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":356,"end":366,"href":"https:\u002F\u002Fwww.llamaindex.ai\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":418,"end":422,"href":"https:\u002F\u002Fgithub.com\u002Fwhyhow-ai\u002Frecursive-retrieval","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":418,"end":422,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*jZtN0NMc5TvzTdgO":{"__typename":"ImageMetadata","id":"0*jZtN0NMc5TvzTdgO","originalHeight":890,"originalWidth":1600,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:4cb09146a12a_4":{"__typename":"Paragraph","id":"4cb09146a12a_4","name":"7132","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:0*jZtN0NMc5TvzTdgO"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_5":{"__typename":"Paragraph","id":"4cb09146a12a_5","name":"b048","type":"P","href":null,"layout":null,"metadata":null,"text":"Some of the very specific problems that we have come across in documents, particularly legal documents, was the need to build a document hierarchy of the different clauses within the document. This is as clauses sometimes referred to other clauses to get the full meaning and context.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":128,"end":146,"href":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fdeterministic-document-structure-based-retrieval-472682f9629a","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_6":{"__typename":"Paragraph","id":"4cb09146a12a_6","name":"5f3d","type":"P","href":null,"layout":null,"metadata":null,"text":"In order to gain the full context, you then had to recursively navigate and retrieve any mentioned clauses (and even footnotes!), navigate the document hierarchy graph to find the mentioned clause, see if any other clauses were mentioned, and to repeat. Recursive retrieval can be done on a range of other document elements outside legal documents including page numbers, multimodal data like images, hyperlinks to other documents or external data, etc.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":51,"end":71,"href":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fadvanced-rag-and-the-3-types-of-recursive-retrieval-cdd0fa52e1ba?source=stats_homepage-------------------------------------","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":254,"end":273,"href":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fadvanced-rag-and-the-3-types-of-recursive-retrieval-cdd0fa52e1ba?source=stats_homepage-------------------------------------","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_7":{"__typename":"Paragraph","id":"4cb09146a12a_7","name":"dcb3","type":"P","href":null,"layout":null,"metadata":null,"text":"Legal documents have always fascinated me when it comes to graph-based traversal and retrieval, given the structured nature of the documents. There is also a very specific structured retrieval step that must also always take place in the context of a legal document in the guise of the definitions page, where every specific important term has a very specific variable or fixed definition that can change depending on the nature of the document.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_8":{"__typename":"Paragraph","id":"4cb09146a12a_8","name":"aa99","type":"P","href":null,"layout":null,"metadata":null,"text":"In this Notebook and example, we want to show how you can easily create a document hierarchy graph of the clauses within a legal document, a graph of the definitions in the legal document, and a multi-graph multi-agent recursive retrieval process that answers questions by intelligently navigating through both the document hierarchy graph and the definition graph to gain the full context for questions posed against it.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_9":{"__typename":"Paragraph","id":"4cb09146a12a_9","name":"7b3b","type":"P","href":null,"layout":null,"metadata":null,"text":"In this example, we take a simple regulatory document issued by the Malaysian Central Bank, specifically this document governing compliance rules in a variety of organizations.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":105,"end":118,"href":"https:\u002F\u002Fwww.bnm.gov.my\u002Fdocuments\u002F20124\u002F938039\u002Fpd_compliance_Oct2015+%28Reissuance_May2016%29.pdf\u002F6da52ca8-734a-d2fb-e214-093430ea8fb6?t=1592219195301","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":105,"end":118,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_10":{"__typename":"Paragraph","id":"4cb09146a12a_10","name":"130b","type":"P","href":null,"layout":null,"metadata":null,"text":"The question we want to get an answer to is the question:- How can the Board and the CCO manage control functions?","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":59,"end":114,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_11":{"__typename":"Paragraph","id":"4cb09146a12a_11","name":"499e","type":"P","href":null,"layout":null,"metadata":null,"text":"The ideal flow to answer this question would be:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_12":{"__typename":"Paragraph","id":"4cb09146a12a_12","name":"110f","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Gives me a definition of CCO from definition page","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_13":{"__typename":"Paragraph","id":"4cb09146a12a_13","name":"ed8b","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Retrieval of information from Clause 6.3 & Clause 7.2.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_14":{"__typename":"Paragraph","id":"4cb09146a12a_14","name":"543b","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Detection of “Refer to Para 7.3 and 7.4” in Clause 7.2.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_15":{"__typename":"Paragraph","id":"4cb09146a12a_15","name":"133b","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Traverses to and retrieves Para 7.3 and 7.4","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_16":{"__typename":"Paragraph","id":"4cb09146a12a_16","name":"fce0","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Detection of the mention of Para 9.1 and the retrieval of Para 9.1","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_17":{"__typename":"Paragraph","id":"4cb09146a12a_17","name":"4a73","type":"P","href":null,"layout":null,"metadata":null,"text":"As a quick benchmark, when we run this through ChatGPT using GPT4o (which has embedded agentic reasoning), we get the following answer:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_18":{"__typename":"Paragraph","id":"4cb09146a12a_18","name":"4bff","type":"PRE","href":null,"layout":null,"metadata":null,"text":"The management of control functions by the Board and the Chief Compliance \nOfficer (CCO) involves several key responsibilities as outlined in the \ncompliance document:\n\nResponsibilities of the Board:\n1. Oversight of Compliance Risk Management: The Board is responsible for \noverseeing the management of compliance risk within the financial institution. This includes approving the compliance policy, establishing the compliance function, and appointing the CCO.\n2. Approval and Support for the Compliance Function: The Board must \nensure that the compliance function and the CCO have the appropriate standing, \nauthority, and independence to carry out their duties effectively. The Board \nmust also ensure that the compliance function is adequately resourced.\n3.Engagement with the CCO: The Board should engage with the CCO regularly to \ndiscuss issues faced by the compliance function and ensure the CCO has direct \naccess to the Board.\n4. Annual Evaluation: The Board must evaluate the effectiveness of the \ninstitution’s management of compliance risk at least annually, considering \nassessments from senior management, internal audit, and the CCO.\n\nResponsibilities of the Chief Compliance Officer (CCO):\n1. Coordination and Management of Compliance Risk: The CCO is responsible for \ncoordinating the identification, management, and monitoring of compliance risk\nacross the institution. This includes ensuring compliance monitoring and \ntesting are consistent across the organization.\n2. Reporting and Advising: The CCO must report regularly to senior management \non the findings and analysis of compliance risks and must ensure that reports \nare readily available to internal audit and regulatory authorities. The CCO \nalso advises the Board and senior management on legal and regulatory \nrequirements, keeping them informed of developments and their implications.\n3. Independence: The CCO must maintain independence from business lines to \neffectively carry out the role of a control function. This includes ensuring \nthat there is no conflict of interest in their responsibilities, reporting \nlines, or remuneration.\n4. Resources and Training: The CCO must ensure that the compliance function \nis sufficiently resourced with officers who have the necessary qualifications \nand experience. The CCO is also responsible for ensuring that adequate training\n is provided to officers on relevant legal and regulatory requirements.\n\nInteraction with Other Control Functions:\nThe compliance function should be organized in a way that allows effective \nmanagement of compliance risk, considering the size, nature, and complexity of\nthe financial institution’s operations. Where responsibilities are shared \nbetween a dedicated compliance unit and other control functions,\nclear documentation and coordination are required to ensure that the CCO can \nperform their duties effectively without impairing independence or focus.\nBy fulfilling these responsibilities, the Board and the CCO can ensure that \nthe institution's compliance risks are managed effectively, supporting the \noverall safety and soundness of the financial institution.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":169,"end":199,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1152,"end":1207,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":2432,"end":2473,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"DISABLED","lang":null},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_19":{"__typename":"Paragraph","id":"4cb09146a12a_19","name":"2adc","type":"P","href":null,"layout":null,"metadata":null,"text":"This answer is interesting but incomplete because it:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_20":{"__typename":"Paragraph","id":"4cb09146a12a_20","name":"0628","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Seems to specifically pick up on the keyword ‘compliance’ and highlights all the compliance obligations that are relevant to other clauses as opposed to specifically the board and the CCO. For example, coordination across jurisdictions (Para 8.2) was raised in the context of ‘compliance’, and remuneration independence (Para 7.8) was raised in the context of ‘compliance’.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_21":{"__typename":"Paragraph","id":"4cb09146a12a_21","name":"1daf","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Crucially, it seems to have missed the explicit references to Para 7.3, and 7.4 that explicitly state a key obligation between the Board and the CCO around Board approvals being required when the CCO shares control functions. It has also missed Para 9.1 about the separation between audit and compliance functions.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_22":{"__typename":"Paragraph","id":"4cb09146a12a_22","name":"2644","type":"P","href":null,"layout":null,"metadata":null,"text":"This is understandable given that recursive retrieval of clauses, pages and footers are not explicitly part of the typical semantic similarity retrieval processes that govern RAG.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_23":{"__typename":"Paragraph","id":"4cb09146a12a_23","name":"7ea5","type":"H3","href":null,"layout":null,"metadata":null,"text":"Summary of Multi-Graph Multi-Agent Workflow Developed","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":53,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*I-ULV2KUEgZNI5ZuT9ApOg.png":{"__typename":"ImageMetadata","id":"1*I-ULV2KUEgZNI5ZuT9ApOg.png","originalHeight":1476,"originalWidth":1900,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:4cb09146a12a_24":{"__typename":"Paragraph","id":"4cb09146a12a_24","name":"a667","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:1*I-ULV2KUEgZNI5ZuT9ApOg.png"},"text":"For those looking to understand what each agent does, we include code snippets for each agent in the Appendix","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_25":{"__typename":"Paragraph","id":"4cb09146a12a_25","name":"782d","type":"H4","href":null,"layout":null,"metadata":null,"text":"Creation of the Graphs","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":22,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_26":{"__typename":"Paragraph","id":"4cb09146a12a_26","name":"819c","type":"P","href":null,"layout":null,"metadata":null,"text":"Within this Notebook, we first extract the document structure parsed by Reducto’s document ingestion engine. The document structure breaks down every page into different elements, such as a Section Header, a List Item, or a Footer.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":72,"end":81,"href":"https:\u002F\u002Freducto.ai\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*rqge8YhCpZdAi7PV":{"__typename":"ImageMetadata","id":"0*rqge8YhCpZdAi7PV","originalHeight":1196,"originalWidth":1600,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:4cb09146a12a_27":{"__typename":"Paragraph","id":"4cb09146a12a_27","name":"cc05","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:0*rqge8YhCpZdAi7PV"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_28":{"__typename":"Paragraph","id":"4cb09146a12a_28","name":"8c5d","type":"P","href":null,"layout":null,"metadata":null,"text":"The elements are then combined based on the order they appear and their implied hierarchies, for example, a Section Header is a parent of a List Item. We then analyze the links in the document to identify connections between extracted elements that can be modeled in the lexical graph.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*BcjSoFxrgE_RcBAT":{"__typename":"ImageMetadata","id":"0*BcjSoFxrgE_RcBAT","originalHeight":845,"originalWidth":1600,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:4cb09146a12a_29":{"__typename":"Paragraph","id":"4cb09146a12a_29","name":"dac3","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:0*BcjSoFxrgE_RcBAT"},"text":"Link to Document Hierarchy\u002FLexical Graph","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":40,"href":"https:\u002F\u002Fwhyhowai.netlify.app\u002Fpublic\u002Fgraph\u002F66d7eebbeda622fc957cc7a0","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:1*oU24xJokx2eozjy8_COAig.png":{"__typename":"ImageMetadata","id":"1*oU24xJokx2eozjy8_COAig.png","originalHeight":912,"originalWidth":2052,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:4cb09146a12a_30":{"__typename":"Paragraph","id":"4cb09146a12a_30","name":"5307","type":"IMG","href":null,"layout":"INSET_CENTER","metadata":{"__ref":"ImageMetadata:1*oU24xJokx2eozjy8_COAig.png"},"text":"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_31":{"__typename":"Paragraph","id":"4cb09146a12a_31","name":"b68a","type":"P","href":null,"layout":null,"metadata":null,"text":"We then import the chunks and triples into WhyHow’s Knowledge Graph Studio using our SDK here to create the Lexical Graph.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":89,"end":93,"href":"https:\u002F\u002Fwhyhow-ai.github.io\u002Fwhyhow-sdk-docs\u002Fexamples\u002Fcreate_graph_from_triples\u002F","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_32":{"__typename":"Paragraph","id":"4cb09146a12a_32","name":"3cef","type":"P","href":null,"layout":null,"metadata":null,"text":"We also built a graph of the legal definitions for the document. Uniquely in legal documents, there is a definitions section for each document that helps to define the specific way certain terms must be interpreted. This can differ by document, use-case and client. In this case, the document contained definitions on pages 4–5. These texts were extracted and passed into GPT-4o with a prompt to extract the legal terms and their definitions verbatim and return them as structured output. The output was turned into a CSV file and uploaded as a separate graph using the SDK and a predefined schema. This Definition Graph is invoked by the Definition Agent when needed to augment the context with the specific relevant definitions. In this case, the Definition Agent is invoked after the initial clauses are retrieved.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"ImageMetadata:0*LEQpckUFmmnOG8SA":{"__typename":"ImageMetadata","id":"0*LEQpckUFmmnOG8SA","originalHeight":920,"originalWidth":1600,"focusPercentX":null,"focusPercentY":null,"alt":null},"Paragraph:4cb09146a12a_33":{"__typename":"Paragraph","id":"4cb09146a12a_33","name":"1b54","type":"IMG","href":null,"layout":"OUTSET_CENTER","metadata":{"__ref":"ImageMetadata:0*LEQpckUFmmnOG8SA"},"text":"Link to Definition Graph","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":0,"end":24,"href":"https:\u002F\u002Fwhyhowai.netlify.app\u002Fpublic\u002Fgraph\u002F66d7edbaeda622fc957cc73f","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_34":{"__typename":"Paragraph","id":"4cb09146a12a_34","name":"d699","type":"P","href":null,"layout":null,"metadata":null,"text":"We then imported the nodes from WhyHow into the notebook, and used LlamaIndex to locally index the information of the nodes, preserving the embeddings generated with WhyHow. We use a combination of LlamaIndex’s Vector, BM25, and Keyword retrievers. The addition of the BM25 and keyword retrievers are helpful in a legal document use case where the query and retrieval process requires precision with terminology. BM25 helps to identify key terms in highly repetitive text, while the keyword retriever ensures that important terms, despite occurring infrequently, are retrieved as needed.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_35":{"__typename":"Paragraph","id":"4cb09146a12a_35","name":"c150","type":"P","href":null,"layout":null,"metadata":null,"text":"LangGraph was used to build a multi-agent workflow around the lexical graph with the WhyHow SDK and GPT-4o.Essentially, when a query is passed, the system first searches for the relevant vector chunks through the Initial Search Agent. In this case, the vector chunks are clauses or sub-clauses. The Definition Agent is subsequently called here to augment the clauses with the relevant definitions. The Router Agent then detects if there are additional linked sections or footers that it needs to refer to, and if so, to retrieve the appropriate sections and considers them. The Recursive Retrieval Agent will recursively do so if the subsequent retrieved clauses (as is the case here), refers to even more clauses.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_36":{"__typename":"Paragraph","id":"4cb09146a12a_36","name":"7f6e","type":"P","href":null,"layout":null,"metadata":null,"text":"The first clauses it retrieves are Paragraphs 6.3 and 7.2. The Definitions Graph is referenced to check if there is any additional context via the definitions section that should be included. The additional definitions for “CCO” and “Senior Management” are included.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_37":{"__typename":"Paragraph","id":"4cb09146a12a_37","name":"7bdf","type":"P","href":null,"layout":null,"metadata":null,"text":"Within Paragraph 6.3, there is the following sub-paragraph 6.3.f:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_38":{"__typename":"Paragraph","id":"4cb09146a12a_38","name":"6934","type":"ULI","href":null,"layout":null,"metadata":null,"text":"“where the CCO also carries out responsibilities in respect of other control functions3, be satisfied that a sound overall control environment will not be compromised by the combination of responsibilities performed by the CCO.”","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":228,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_39":{"__typename":"Paragraph","id":"4cb09146a12a_39","name":"a5b6","type":"P","href":null,"layout":null,"metadata":null,"text":"Based on the information of the first clause it retrieves, a Router Agent then helps to detect if there are clauses or footers mentioned in the material. In this case, a Footer (Footnote 3) was associated with the first clause. The Router Agent then triggers the Footer Parsing Agent. The Footer Parsing agent identifies the relevant footer and returns the following Footer:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_40":{"__typename":"Paragraph","id":"4cb09146a12a_40","name":"1914","type":"ULI","href":null,"layout":null,"metadata":null,"text":"“Refer to paragraphs 7.3 and 7.4.”","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":34,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_41":{"__typename":"Paragraph","id":"4cb09146a12a_41","name":"64ee","type":"P","href":null,"layout":null,"metadata":null,"text":"Here, another traversal is required, and the Recursive Retrieval Agent is used to traverse the Lexical Graph and retrieve the chunks\u002Fclauses within Paragraphs 7.3 and 7.4.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_42":{"__typename":"Paragraph","id":"4cb09146a12a_42","name":"1402","type":"P","href":null,"layout":null,"metadata":null,"text":"This new information from Paragraphs 7.3 and 7.4 is combined together. Paragraph 7.4(b) contains a reference to Paragraph 9.1. here:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_43":{"__typename":"Paragraph","id":"4cb09146a12a_43","name":"65b4","type":"ULI","href":null,"layout":null,"metadata":null,"text":"“compliance function responsibilities cannot be shared with, nor can the CCO assume responsibilities for, internal audit as such practices would render the independent review process described in paragraph 9.1 ineffective.”","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":223,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_44":{"__typename":"Paragraph","id":"4cb09146a12a_44","name":"0fb2","type":"P","href":null,"layout":null,"metadata":null,"text":"Paragraph 7.4 contains a link to Paragraph 9.1, which the Router Agent detects, and instructs the Recursive Retrieval Agent to retrieve it on the next pass. An Answering Agent tracks all the incoming information to summarize and ultimately formulate the final answer to return to the user.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_45":{"__typename":"Paragraph","id":"4cb09146a12a_45","name":"bd0a","type":"P","href":null,"layout":null,"metadata":null,"text":"The final answer constructed reflects our ideal flow and takes in information from the Definitions page, Paragraph 6.3 & 7.2, Footer Note 3, Paragraph 7.3, 7.4, 9.1 and is accurately summarized for the user with all the relevant information taken in with smart traversals.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_46":{"__typename":"Paragraph","id":"4cb09146a12a_46","name":"37f2","type":"P","href":null,"layout":null,"metadata":null,"text":"To ensure we did not just get lucky, we ran the final query 3 times, which showed a successful retrieval of the relevant information.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_47":{"__typename":"Paragraph","id":"4cb09146a12a_47","name":"3296","type":"PRE","href":null,"layout":null,"metadata":null,"text":"To manage control functions effectively, the Board and the Chief Compliance \nOfficer (CCO) have distinct responsibilities that they must exercise:\n\nResponsibilities of the Board:\n- Approve critical decisions regarding the CCO, including appointment, \nremuneration, and termination (Section 6.3(a)).\n- Ensure the CCO has sufficient stature to engage effectively with senior \nmanagement (Section 6.3(b)).\n- Regularly engage with the CCO to discuss compliance issues and consider \ninteractions without senior management present (Section 6.3(c)).\n- Provide the CCO with unimpeded access to communicate with the board directly\n(Section 6.3(d)).\n- Support the CCO with adequate resources to perform duties effectively, \nincluding competent staff (Section 6.3(e)).\n- Satisfy themselves that combined responsibilities, if any, do not compromise\nthe control environment (Section 6.3(f)).\n\nResponsibilities of the CCO:\n- Coordinate the identification and management of institution-wide compliance \nrisks (Section 7.2(b)).\n- Ensure consistent conduct of compliance monitoring and testing across the \norganization (Section 7.2(b)).\n- Maintain independence and sufficient focus on compliance duties, even when \ntasked with additional control functions (Section 7.3).\n\nShared Responsibilities & Coordination:\n- The board must approve any sharing of compliance function responsibilities \nbetween the compliance unit and other control functions (Section 7.4(a)).\n- Function responsibilities, including timely communication of issues, should \nbe well-defined and documented (Section 7.2(a)).\n- Effective arrangements for coordination among control functions should be in\nplace to facilitate the CCO’s responsibilities (Section 7.2(d)).\n- Compliance responsibilities must not compromise the separation of the \ninternal audit function (Section 9.1).\n\nThe board should ensure comprehensive oversight, and the CCO should maintain\neffective coordination and communication across the organization to manage\ncontrol functions efficiently.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":148,"end":178,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":282,"end":296,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":386,"end":400,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":526,"end":540,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":623,"end":637,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":741,"end":755,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":862,"end":876,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":880,"end":908,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":995,"end":1009,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1103,"end":1117,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1240,"end":1251,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1255,"end":1294,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1430,"end":1444,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1558,"end":1572,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1702,"end":1716,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1817,"end":1828,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"DISABLED","lang":null},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_48":{"__typename":"Paragraph","id":"4cb09146a12a_48","name":"35c9","type":"P","href":null,"layout":null,"metadata":null,"text":"In conclusion through this exercise, we have developed a system that demonstrates the following:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_49":{"__typename":"Paragraph","id":"4cb09146a12a_49","name":"5cc6","type":"ULI","href":null,"layout":null,"metadata":null,"text":"A multi-graph system, with each graph representing a different process and objective within a RAG system.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_50":{"__typename":"Paragraph","id":"4cb09146a12a_50","name":"a2bf","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Creating RAG-capable automated lexical graphs with Reducto & WhyHow & LlamaIndex","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_51":{"__typename":"Paragraph","id":"4cb09146a12a_51","name":"5094","type":"ULI","href":null,"layout":null,"metadata":null,"text":"A multi-agent system that allowed for smart traversals of documents based on the way the document intends for a human to read and traverse its information, returning answers from each section and sub-section in a structured way","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_52":{"__typename":"Paragraph","id":"4cb09146a12a_52","name":"de13","type":"ULI","href":null,"layout":null,"metadata":null,"text":"A multi-graph multi-agent system that is governed with LangGraph.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_53":{"__typename":"Paragraph","id":"4cb09146a12a_53","name":"9fdb","type":"P","href":null,"layout":null,"metadata":null,"text":"WhyHow.AI’s Knowledge Graph Studio Platform (currently in Beta) is the easiest way to build modular, agentic Knowledge Graphs, combining workflows from LLMs, developers and non-technical domain experts.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":12,"end":43,"href":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Fwhyhow-ai-kg-studio-platform-beta-rag-native-graphs-1105e5a84ff2","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_54":{"__typename":"Paragraph","id":"4cb09146a12a_54","name":"e3c8","type":"P","href":null,"layout":null,"metadata":null,"text":"If you’re thinking about, in the process of, or have already incorporated knowledge graphs in RAG for accuracy, memory and determinism, we’d love to chat at team@whyhow.ai, or follow our newsletter at WhyHow.AI. Join our discussions about rules, determinism and knowledge graphs in RAG on our Discord.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"A","start":200,"end":210,"href":"https:\u002F\u002Fwhyhow.ai\u002F","anchorType":"LINK","userId":null,"linkMetadata":null},{"__typename":"Markup","type":"A","start":292,"end":300,"href":"https:\u002F\u002Fdiscord.gg\u002F9bWqrsxgHr","anchorType":"LINK","userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_55":{"__typename":"Paragraph","id":"4cb09146a12a_55","name":"c434","type":"H4","href":null,"layout":null,"metadata":null,"text":"Appendix","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":8,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_56":{"__typename":"Paragraph","id":"4cb09146a12a_56","name":"8d76","type":"P","href":null,"layout":null,"metadata":null,"text":"Agent code snippets","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":19,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_57":{"__typename":"Paragraph","id":"4cb09146a12a_57","name":"b858","type":"P","href":null,"layout":null,"metadata":null,"text":"Definition Agent","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_58":{"__typename":"Paragraph","id":"4cb09146a12a_58","name":"0c89","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Retrieves the definitions of terms mentioned in the query.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_59":{"__typename":"Paragraph","id":"4cb09146a12a_59","name":"8e9e","type":"PRE","href":null,"layout":null,"metadata":null,"text":"def definitions_search(query_prompt: str, client: Optional[WhyHow]=None) -\u003E Dict[str, str]:\n    \"\"\"\n    Search for definitions of terms in a question prompt and return them as a dictionary.\n    \"\"\"\n    if client is None:\n        client = WhyHow(api_key=WHYHOW_API_KEY, base_url=WHYHOW_API_URL)\n\n    definitions_response = client.graphs.query_unstructured(\n        graph_id=definitions_graph.graph_id,\n        query=query_prompt,\n    )\n    \n    response_text = definitions_response.answer\n    term_def_pairs = response_text.split('\\n')\n    definitions_dict = {}\n    \n    for pair in term_def_pairs:\n        if ':' in pair:\n            term, definition = pair.split(':', 1)\n            definitions_dict[term.strip()] = definition.strip()\n    \n    return definitions_dict\n\nquery_prompt = \"\"\"Return me definitions for the terms in this query: \"How can the Board and the CCO manage control functions?\" Ensure the term-definition pairs are separated by newlines, properly capitalised\"\"\"\n\ndefinitions_dict = definitions_search(query_prompt)\n\n\ndef print_prompt_definitions_dict(definitions_dict):\n    prompt = \"Relevant Definitions:\\n\"\n    for term, definition in definitions_dict.items():\n        prompt += f\"{term}: {definition}\\n\"\n    return prompt\n\nprint(print_prompt_definitions_dict(definitions_dict))","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"rust"},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_60":{"__typename":"Paragraph","id":"4cb09146a12a_60","name":"b183","type":"P","href":null,"layout":null,"metadata":null,"text":"Router Agent","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":12,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_61":{"__typename":"Paragraph","id":"4cb09146a12a_61","name":"4eb2","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Decides if the process should stop or continue. Also identifies relevant nodes containing footer information or links to other nodes to be retrieved by the Recursive Retrieval Agent.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_62":{"__typename":"Paragraph","id":"4cb09146a12a_62","name":"d1bf","type":"PRE","href":null,"layout":null,"metadata":null,"text":"def router_agent(state: AgentState) -\u003E AgentState:\n    # decide if process should should stop or continue\n\n    starter_prompt_footer = f\"\"\"\n        You are an intelligent agent overseeing a multi-agent retrieval process of graph nodes from a document. These nodes are to answer the query: \n        ```{state['query']}```\n        \n        Below this request is a list of nodes that were automatically retrieved. \n        \n        You must determine if the list of nodes is enough to answer the query. If there isn't enough information, you must identify any relevant footer information in the nodes.\n        \n        A node can footer information asking to look in another section\u002Fpart of the document, which will require a separate natural language search. \n        Example: If the footer says \"see paragraph x\", a search query e.g. \"Return paragraph x to answer the query '{state['query']}'\" should be made. \n    \n        If there are no further nodes worth analyzing, return an empty response. ONLY RETURN QUERIES FOR FOOTERS THAT ARE RELEVANT TO ANSWERING THE QUERY\n        \n        Else, if any relevant nodes require a footer search, specify the node_id and the search query.\n        Nodes are identified by node_id and must be quoted in backticks.     \n    \"\"\"\n    \n    starter_prompt_link = f\"\"\"\n        You are an intelligent agent overseeing a multi-agent retrieval process of graph nodes from a document. These nodes are to answer the query: \n        ```{state['query']}```\n        \n        Below this request is a list of nodes that were automatically retrieved. \n        \n        You must determine if the list of nodes is enough to answer the query. If there isn't enough information, you must identify any linked nodes that could be worth exploring.\n        \n        If there are no further nodes worth analyzing, return an empty response.\n        \n        Return a list of node_ids. ONLY RETURN NODE_IDS for NODES THAT ARE RELEVANT TO ANSWERING THE QUERY. Nodes are identified by node_id and must be quoted in backticks.\n    \"\"\"\n    \n    # collect latest nodes, and all nodes\n    last_fetched_nodes_flattened: Dict[str, MultiAgentSearchLocalNode] = {}\n    all_nodes_flattened: Dict[str, MultiAgentSearchLocalNode] = {}","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"ruby"},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_63":{"__typename":"Paragraph","id":"4cb09146a12a_63","name":"cbaf","type":"P","href":null,"layout":null,"metadata":null,"text":"Supervisor Agent","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":16,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_64":{"__typename":"Paragraph","id":"4cb09146a12a_64","name":"7e29","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Monitors the context window and prunes nodes if too much context is being used.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_65":{"__typename":"Paragraph","id":"4cb09146a12a_65","name":"0bac","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Also keeps track of search failures, if no nodes or relevant information was found for footer searches or linked nodes. If there are too many repeated search failures, it will end the retrieval process prematurely.","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_66":{"__typename":"Paragraph","id":"4cb09146a12a_66","name":"a4d7","type":"PRE","href":null,"layout":null,"metadata":null,"text":"def supervisor_agent(state:AgentState) -\u003E AgentState:\n    \n    # Look for search failures. This might be an instance where multiple searches were made for certain parts of the document, but no relevant information was found.\n    # This means that the search has to be ended prematurely to prevent infinite loops.\n    printout = \"\"\n    for node in state[\"previous_nodes\"]:\n        printout += node.print_node_prompt()\n    for node in state[\"last_fetched_context_nodes\"]:\n        printout += node.print_node_prompt()\n        \n    prompt = f\"\"\"\nYou are a supervisor agent overseeing the multi-agent retrieval process of graph nodes from a document. The nodes are to answer the query:\n```{state['query']}```\n\n\nBelow is a list of nodes that were automatically retrieved, followed by a list of errors. If there are many similar, repeated errors in the retrieval process , where no further linked or relevant nodes could be retrieved, return END to end the process. Else return CONTINUE. \nReturn only a single word, either END or CONTINUE.\n\"\"\"\n    \n    completion = openai_client.beta.chat.completions.parse(\n        model=\"gpt-4o-2024-08-06\",\n        messages=[\n            {\"role\": \"system\", \"content\": prompt},\n            {\"role\": \"user\", \"content\": printout},\n            {\"role\": \"user\", \"content\": state['search_failures']},\n        ],\n    )","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"perl"},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_67":{"__typename":"Paragraph","id":"4cb09146a12a_67","name":"f703","type":"P","href":null,"layout":null,"metadata":null,"text":"Recursive Agent","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_68":{"__typename":"Paragraph","id":"4cb09146a12a_68","name":"1471","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Retrieves information for nodes marked by the Router Agent","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_69":{"__typename":"Paragraph","id":"4cb09146a12a_69","name":"7773","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Either fetches new linked nodes, or does a keyword search on the document for the footer (e.g. if the Footer asks to refer to paragraph 7.3 and 7.4 without a link, a search is done instead). An LLM call will prune redundant nodes at this step","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_70":{"__typename":"Paragraph","id":"4cb09146a12a_70","name":"d8bd","type":"PRE","href":null,"layout":null,"metadata":null,"text":"def recursive_retrieval(state: AgentState) -\u003E AgentState:\n\n    current_nodes = state[\"last_fetched_context_nodes\"]\n    \n    for current_node in current_nodes:\n        state[\"previous_nodes\"].append(current_node)\n\n    new_current_nodes = []\n\n    # look up the nodes to fetch by id    \n    \n    for node_id in state[\"node_links_to_fetch\"]:\n    # sometimes GPT returns node ids with or without backticks\n        if node_id[0] == \"`\":\n            node_id = node_id[1:-1]\n        if node_id in local_nodes_map:\n            new_current_nodes.append(local_nodes_map[node_id])\n        else:\n            state[\"search_failures\"].append(f\"Failed to fetch node with id: {node_id}\")\n\n\n    for node_id, search_query in state[\"node_footers_to_fetch\"].items():\n        # fetch nodes by keyword and bm25 search\n        footer_retrieved_nodes = retrieve_with_keywords_bm25(search_query)\n        # LLM prunes nodes that are not relevant\n        footer_retrieved_nodes, _ = prune_nodes(search_query, footer_retrieved_nodes)\n\n        for node in footer_retrieved_nodes:\n            new_current_nodes.append(node)\n\n        # if no nodes fetched, log failure\n        if len(footer_retrieved_nodes) == 0:\n            state[\"search_failures\"].append(\n                f\"Failed to fetch nodes for query: {search_query}\"\n            )\n\n    state[\"last_fetched_context_nodes\"] = new_current_nodes\n    state[\"pass_count\"] += 1\n    state[\"node_footers_to_fetch\"] = {}\n    state[\"node_links_to_fetch\"] = []\n\n    return state","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"perl"},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_71":{"__typename":"Paragraph","id":"4cb09146a12a_71","name":"44c3","type":"P","href":null,"layout":null,"metadata":null,"text":"Answering Agent","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":15,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_72":{"__typename":"Paragraph","id":"4cb09146a12a_72","name":"7525","type":"ULI","href":null,"layout":null,"metadata":null,"text":"Given all the information collected in the retrieval process, and the definitions from the document, it finalizes the answer to the query","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_73":{"__typename":"Paragraph","id":"4cb09146a12a_73","name":"4787","type":"ULI","href":null,"layout":null,"metadata":null,"text":"It also tries to link to sources e.g. paragraph numbers wherever possible","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_74":{"__typename":"Paragraph","id":"4cb09146a12a_74","name":"4952","type":"PRE","href":null,"layout":null,"metadata":null,"text":"def answering_agent(state: AgentState) -\u003E AgentState:\n    # answer the query\n    prompt = f\"\"\"\nYou are an answering agent. You will be given a list of document nodes that were automatically retrieved by the system. These nodes are to answer the query:\n```{state['query']}```\n\nGive references to sections\u002Fparagraphs if possible, but do not output full node ids with backticks and the hash. \n\"\"\"","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"AUTO","lang":"ruby"},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_75":{"__typename":"Paragraph","id":"4cb09146a12a_75","name":"6995","type":"P","href":null,"layout":null,"metadata":null,"text":"Variations of the Answers retrieved through the Multi-Graph Multi-Agent system","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":0,"end":78,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_76":{"__typename":"Paragraph","id":"4cb09146a12a_76","name":"4001","type":"P","href":null,"layout":null,"metadata":null,"text":"Answer #2:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_77":{"__typename":"Paragraph","id":"4cb09146a12a_77","name":"3006","type":"PRE","href":null,"layout":null,"metadata":null,"text":"To manage control functions effectively, both the Board and the Chief \nCompliance Officer (CCO) must collaborate and establish a structured \nframework. Key measures include:\n\nBoard’s Responsibilities:\n- The Board must approve the appointment, remuneration, and termination of the\nCCO, ensuring they have the necessary stature to engage effectively with\nsenior management (S 6.3(a), (b)).\n- The Board should engage regularly with the CCO to discuss compliance issues\nand ensure the CCO has direct access to the Board (S 6.3(c), (d)).\n- The Board must also assure that the CCO is granted adequate resources and\nsupport, including competent officers, to fulfill their duties (S 6.3(e)).\n\nCCO’s Role and Independence:\n- The CCO should oversee the institution-wide compliance risk management and \nensure that responsibilities are clearly documented and communicated in the \ncompliance policy (S 7.2(a), (b)).\n- If the CCO is involved in other control functions, they must ensure their \nindependence and ability to focus on compliance responsibilities remain \nuncompromised (S 7.3).\n\nCoordination with Other Functions:\n- Proper coordination between the CCO and other control functions is essential.\nThis includes robust information flows and mechanisms for seeking compliance\nadvice (S 7.2(d)).\n- The Board must approve the sharing of compliance responsibilities to ensure\nthere is no dilution of focus or effectiveness (S 7.4(a)).\n\nSeparation from Internal Audit:\n- Compliance functions should remain distinct from the internal audit to \nmaintain the efficacy of independent reviews (S 7.4(b), S 9.1).\n\nTraining and Capacity Building:\n- The compliance function is responsible for training and providing guidance\nto other officers on legal and regulatory requirements to manage compliance \nrisk effectively (S 8.11).\n\nBy implementing these steps, the Board and the CCO can effectively manage\ncontrol functions, maintaining robust compliance and governance frameworks.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":175,"end":200,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":371,"end":386,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":516,"end":531,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":672,"end":682,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":685,"end":713,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":887,"end":902,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1068,"end":1075,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1078,"end":1112,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1277,"end":1287,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1414,"end":1424,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1427,"end":1458,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1578,"end":1595,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1598,"end":1629,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1801,"end":1809,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"DISABLED","lang":null},"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_78":{"__typename":"Paragraph","id":"4cb09146a12a_78","name":"7a76","type":"P","href":null,"layout":null,"metadata":null,"text":"Answer #3:","hasDropCap":null,"dropCapImage":null,"markups":[],"codeBlockMetadata":null,"iframe":null,"mixtapeMetadata":null},"Paragraph:4cb09146a12a_79":{"__typename":"Paragraph","id":"4cb09146a12a_79","name":"e24a","type":"PRE","href":null,"layout":null,"metadata":null,"text":"The management of control functions by the Board and the Chief Compliance \nOfficer (CCO) involves several key responsibilities and structures:\n\nRole of the Board in Managing CCO Functions:\n- The board must approve the appointment, remuneration, and termination of the\nCCO (Section 6.3(a)).\n- The board should ensure that the CCO has sufficient stature to interact \neffectively with the CEO and senior management (Section 6.3(b)).\n- Regular engagement between the board and the CCO is important to discuss \ncompliance issues directly (Section 6.3(c)).\n- The CCO must have direct, unimpeded access to the board (Section 6.3(d)).\n- There must be adequate resources and support for the CCO to perform his\nduties effectively (Section 6.3(e)).\n\nShared Responsibilities and Independence:\n- Where compliance functions are shared, the board must approve this \narrangement, and responsibilities should be clearly defined and documented\nin the compliance policy (Section 7.2).\n- The CCO should not assume responsibilities for internal audit, as this can\ncompromise independent review processes (Sections 7.4, 9.1).\n- The CCO must ensure that their independence and ability to focus on\ncompliance are not impaired by additional responsibilities (Section 7.3).\n\nResponsibilities Within the Organization:\n- Compliance is the responsibility of all officers within the institution. \nBusiness lines manage compliance risk through their managerial controls, \nwhile the compliance function ensures that these controls are adequate \n(Section 1.2).\n- The internal audit function provides independent assurance on the quality \nand effectiveness of the institution’s controls, including those concerning\ncompliance (Section 1.2(c)).\n\nCoordination Across Control Functions:\n- Arrangements for coordination among control functions and the CCO must \npromote a consistent approach to managing compliance risk, with adequate \ninformation flows and avenues for advice (Section 7.2(d)).\n\nBy following these guidelines, the Board and the CCO can manage the\ncompliance control functions effectively, ensuring that compliance risks\nare appropriately identified, managed, and mitigated across the organization.","hasDropCap":null,"dropCapImage":null,"markups":[{"__typename":"Markup","type":"STRONG","start":144,"end":188,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":272,"end":288,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":412,"end":428,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":533,"end":549,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":609,"end":625,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":720,"end":736,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":739,"end":780,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":951,"end":964,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1083,"end":1102,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1233,"end":1246,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1249,"end":1290,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1513,"end":1526,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1692,"end":1708,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1711,"end":1749,"href":null,"anchorType":null,"userId":null,"linkMetadata":null},{"__typename":"Markup","type":"STRONG","start":1939,"end":1955,"href":null,"anchorType":null,"userId":null,"linkMetadata":null}],"codeBlockMetadata":{"__typename":"CodeBlockMetadata","mode":"DISABLED","lang":null},"iframe":null,"mixtapeMetadata":null},"CollectionViewerEdge:collectionId:75cb6ccf039f-viewerId:lo_35d2fe133f15":{"__typename":"CollectionViewerEdge","id":"collectionId:75cb6ccf039f-viewerId:lo_35d2fe133f15","isEditor":false,"isMuting":false},"UserViewerEdge:userId:6975d2c42b25-viewerId:lo_35d2fe133f15":{"__typename":"UserViewerEdge","id":"userId:6975d2c42b25-viewerId:lo_35d2fe133f15","isMuting":false},"PostViewerEdge:postId:c90e073e0052-viewerId:lo_35d2fe133f15":{"__typename":"PostViewerEdge","shouldIndexPostForExternalSearch":true,"id":"postId:c90e073e0052-viewerId:lo_35d2fe133f15"},"Tag:rag":{"__typename":"Tag","id":"rag","displayTitle":"Rag","normalizedTagSlug":"rags"},"Tag:llm":{"__typename":"Tag","id":"llm","displayTitle":"Llm","normalizedTagSlug":"llm"},"Tag:knolwedge-graph":{"__typename":"Tag","id":"knolwedge-graph","displayTitle":"Knolwedge Graph","normalizedTagSlug":"knolwedge-graph"},"Tag:graph-rag":{"__typename":"Tag","id":"graph-rag","displayTitle":"Graph Rag","normalizedTagSlug":"graphrag"},"Post:c90e073e0052":{"__typename":"Post","id":"c90e073e0052","collection":{"__ref":"Collection:75cb6ccf039f"},"content({\"postMeteringOptions\":{}})":{"__typename":"PostContent","isLockedPreviewOnly":false,"bodyModel":{"__typename":"RichText","sections":[{"__typename":"Section","name":"7dd4","startIndex":0,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null},{"__typename":"Section","name":"c891","startIndex":53,"textLayout":null,"imageLayout":null,"backgroundImage":null,"videoLayout":null,"backgroundVideo":null}],"paragraphs":[{"__ref":"Paragraph:4cb09146a12a_0"},{"__ref":"Paragraph:4cb09146a12a_1"},{"__ref":"Paragraph:4cb09146a12a_2"},{"__ref":"Paragraph:4cb09146a12a_3"},{"__ref":"Paragraph:4cb09146a12a_4"},{"__ref":"Paragraph:4cb09146a12a_5"},{"__ref":"Paragraph:4cb09146a12a_6"},{"__ref":"Paragraph:4cb09146a12a_7"},{"__ref":"Paragraph:4cb09146a12a_8"},{"__ref":"Paragraph:4cb09146a12a_9"},{"__ref":"Paragraph:4cb09146a12a_10"},{"__ref":"Paragraph:4cb09146a12a_11"},{"__ref":"Paragraph:4cb09146a12a_12"},{"__ref":"Paragraph:4cb09146a12a_13"},{"__ref":"Paragraph:4cb09146a12a_14"},{"__ref":"Paragraph:4cb09146a12a_15"},{"__ref":"Paragraph:4cb09146a12a_16"},{"__ref":"Paragraph:4cb09146a12a_17"},{"__ref":"Paragraph:4cb09146a12a_18"},{"__ref":"Paragraph:4cb09146a12a_19"},{"__ref":"Paragraph:4cb09146a12a_20"},{"__ref":"Paragraph:4cb09146a12a_21"},{"__ref":"Paragraph:4cb09146a12a_22"},{"__ref":"Paragraph:4cb09146a12a_23"},{"__ref":"Paragraph:4cb09146a12a_24"},{"__ref":"Paragraph:4cb09146a12a_25"},{"__ref":"Paragraph:4cb09146a12a_26"},{"__ref":"Paragraph:4cb09146a12a_27"},{"__ref":"Paragraph:4cb09146a12a_28"},{"__ref":"Paragraph:4cb09146a12a_29"},{"__ref":"Paragraph:4cb09146a12a_30"},{"__ref":"Paragraph:4cb09146a12a_31"},{"__ref":"Paragraph:4cb09146a12a_32"},{"__ref":"Paragraph:4cb09146a12a_33"},{"__ref":"Paragraph:4cb09146a12a_34"},{"__ref":"Paragraph:4cb09146a12a_35"},{"__ref":"Paragraph:4cb09146a12a_36"},{"__ref":"Paragraph:4cb09146a12a_37"},{"__ref":"Paragraph:4cb09146a12a_38"},{"__ref":"Paragraph:4cb09146a12a_39"},{"__ref":"Paragraph:4cb09146a12a_40"},{"__ref":"Paragraph:4cb09146a12a_41"},{"__ref":"Paragraph:4cb09146a12a_42"},{"__ref":"Paragraph:4cb09146a12a_43"},{"__ref":"Paragraph:4cb09146a12a_44"},{"__ref":"Paragraph:4cb09146a12a_45"},{"__ref":"Paragraph:4cb09146a12a_46"},{"__ref":"Paragraph:4cb09146a12a_47"},{"__ref":"Paragraph:4cb09146a12a_48"},{"__ref":"Paragraph:4cb09146a12a_49"},{"__ref":"Paragraph:4cb09146a12a_50"},{"__ref":"Paragraph:4cb09146a12a_51"},{"__ref":"Paragraph:4cb09146a12a_52"},{"__ref":"Paragraph:4cb09146a12a_53"},{"__ref":"Paragraph:4cb09146a12a_54"},{"__ref":"Paragraph:4cb09146a12a_55"},{"__ref":"Paragraph:4cb09146a12a_56"},{"__ref":"Paragraph:4cb09146a12a_57"},{"__ref":"Paragraph:4cb09146a12a_58"},{"__ref":"Paragraph:4cb09146a12a_59"},{"__ref":"Paragraph:4cb09146a12a_60"},{"__ref":"Paragraph:4cb09146a12a_61"},{"__ref":"Paragraph:4cb09146a12a_62"},{"__ref":"Paragraph:4cb09146a12a_63"},{"__ref":"Paragraph:4cb09146a12a_64"},{"__ref":"Paragraph:4cb09146a12a_65"},{"__ref":"Paragraph:4cb09146a12a_66"},{"__ref":"Paragraph:4cb09146a12a_67"},{"__ref":"Paragraph:4cb09146a12a_68"},{"__ref":"Paragraph:4cb09146a12a_69"},{"__ref":"Paragraph:4cb09146a12a_70"},{"__ref":"Paragraph:4cb09146a12a_71"},{"__ref":"Paragraph:4cb09146a12a_72"},{"__ref":"Paragraph:4cb09146a12a_73"},{"__ref":"Paragraph:4cb09146a12a_74"},{"__ref":"Paragraph:4cb09146a12a_75"},{"__ref":"Paragraph:4cb09146a12a_76"},{"__ref":"Paragraph:4cb09146a12a_77"},{"__ref":"Paragraph:4cb09146a12a_78"},{"__ref":"Paragraph:4cb09146a12a_79"}]},"validatedShareKey":"","shareKeyCreator":null},"creator":{"__ref":"User:6975d2c42b25"},"inResponseToEntityType":null,"isLocked":false,"isMarkedPaywallOnly":false,"lockedSource":"LOCKED_POST_SOURCE_NONE","mediumUrl":"https:\u002F\u002Fmedium.com\u002Fenterprise-rag\u002Flegal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052","primaryTopic":null,"topics":[{"__typename":"Topic","slug":"programming"}],"isPublished":true,"latestPublishedVersion":"4cb09146a12a","visibility":"PUBLIC","postResponses":{"__typename":"PostResponses","count":2},"clapCount":456,"allowResponses":true,"isLimitedState":false,"title":"Legal Document RAG: Multi-Graph Multi-Agent Recursive Retrieval through Legal Clauses","isSeries":false,"sequence":null,"uniqueSlug":"legal-document-rag-multi-graph-multi-agent-recursive-retrieval-through-legal-clauses-c90e073e0052","socialTitle":"","socialDek":"","canonicalUrl":"","metaDescription":"","latestPublishedAt":1732728496831,"readingTime":15.55377358490566,"previewContent":{"__typename":"PreviewContent","subtitle":"Multi-graph multi-agent systems for legal documents that recursively retrieves different clauses, footnotes and definitions"},"previewImage":{"__ref":"ImageMetadata:1*I-ULV2KUEgZNI5ZuT9ApOg.png"},"isShortform":false,"seoTitle":"","firstPublishedAt":1725730627801,"updatedAt":1732728496831,"shortformType":"SHORTFORM_TYPE_LINK","seoDescription":"","viewerEdge":{"__ref":"PostViewerEdge:postId:c90e073e0052-viewerId:lo_35d2fe133f15"},"isSuspended":false,"license":"ALL_RIGHTS_RESERVED","tags":[{"__ref":"Tag:rag"},{"__ref":"Tag:llm"},{"__ref":"Tag:knolwedge-graph"},{"__ref":"Tag:graph-rag"}],"isNewsletter":false,"statusForCollection":"APPROVED","pendingCollection":null,"detectedLanguage":"en","wordCount":3870,"layerCake":6,"responsesLocked":false}}</script><script>window.__MIDDLEWARE_STATE__={"session":{"xsrf":""},"cache":{"cacheStatus":"HIT"}}</script><script src="https://cdn-client.medium.com/lite/static/js/manifest.0c04b632.js"></script><script src="https://cdn-client.medium.com/lite/static/js/9865.1496d74a.js"></script><script src="https://cdn-client.medium.com/lite/static/js/main.abd8d9a7.js"></script><script src="https://cdn-client.medium.com/lite/static/js/instrumentation.d9108df7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/reporting.ff22a7a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9120.5df29668.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5049.d1ead72d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4810.6318add7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6618.db187378.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2707.b0942613.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/9977.24215cba.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8599.a99358a5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5250.9f9e01d2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5787.e66a3a4d.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2648.26563adf.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8393.826a25fb.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4863.df4e24b2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6589.2f0f39c0.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5642.d8ead0e7.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6546.cd03f950.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/6834.08de95de.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2420.2a5e2d95.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/839.ca7937c2.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7975.d195c6f1.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2106.21ff89d3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/7394.bf599bc5.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/5794.1d6ee184.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8204.c4082863.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/4391.59acaed3.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.0983c716.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/8414.6565ad5f.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/3974.8d3e0217.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/2527.a0afad8a.chunk.js"></script>
<script src="https://cdn-client.medium.com/lite/static/js/PostResponsesContent.36c2ecf4.chunk.js"></script><script>window.main();</script><script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'8eea99f74de647d7',t:'MTczMzYzODMyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"8eea99f74de647d7","version":"2024.10.5","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"token":"0b5f665943484354a59c39c6833f7078","b":1}' crossorigin="anonymous"></script>
</body></html>